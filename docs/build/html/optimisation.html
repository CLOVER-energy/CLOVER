<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Electricity system optimisation &mdash; CLOVER 4.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="CLOVER development" href="get_involved.html" />
    <link rel="prev" title="Electricity system simulation" href="energy_system_simulation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> CLOVER
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="general_setup.html">General setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="electricity_generation.html">Electricity generation</a></li>
<li class="toctree-l1"><a class="reference internal" href="load.html">Load profiles</a></li>
<li class="toctree-l1"><a class="reference internal" href="energy_system_simulation.html">Electricity system simulation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Electricity system optimisation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#preparation">Preparation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#finance-inputs">Finance inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#environmental-inputs">Environmental inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimisation-inputs">Optimisation inputs</a></li>
<li class="toctree-l3"><a class="reference internal" href="#considerations">Considerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performing-an-optimisation-of-an-energy-system">Performing an optimisation of an energy system</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Preparation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#running-an-optimisation">Running an optimisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#saving-optimisation-results-and-opening-saved-files">Saving optimisation results and opening saved files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#optimisation-results">Optimisation results</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#troubleshooting">Troubleshooting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#extension-and-visualisation">Extension and visualisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#changing-parameter-optimisation">Changing parameter optimisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#interpreting-optimisation-results">Interpreting optimisation results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#incorporating-further-constraints">Incorporating further constraints</a></li>
<li class="toctree-l3"><a class="reference internal" href="#considering-environmental-performance">Considering environmental performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#returning-to-system-performance">Returning to system performance</a></li>
<li class="toctree-l3"><a class="reference internal" href="#practical-considerations">Practical considerations</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="get_involved.html">CLOVER development</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">CLOVER</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Electricity system optimisation</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/optimisation.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="electricity-system-optimisation">
<h1>Electricity system optimisation<a class="headerlink" href="#electricity-system-optimisation" title="Permalink to this headline"></a></h1>
<section id="preparation">
<h2>Preparation<a class="headerlink" href="#preparation" title="Permalink to this headline"></a></h2>
<p>Now that we can simulate an electricity system we can combine this
information with the costs and impact over its lifetime, and those of
many other system configurations, in order to select the optimum for our
chosen application and criteria. This will allow us to choose the most
suitable combination of generation and storage technologies to meet our
needs most cost effectively, for example.</p>
<p>Before we can do this we need to provide more information about the the
impacts of the installed system, and the conditions that we define to be
the optimum for our scenario.</p>
<section id="finance-inputs">
<h3>Finance inputs<a class="headerlink" href="#finance-inputs" title="Permalink to this headline"></a></h3>
<p>Financial information is often the key decision metric for designing and
implementing a system: renewable energy systems can provide a number of
co-benefits, but often ultimately need to make financial sense in order
to be selected for deployment. This could be in terms of providing
electricity at a given price, for example lower than the incumbent or
some alternative option, or ensuring that the total cost of a system
does not exceed a certain budget.</p>
<p>The inputs for the financial impact of the system are included in the
<code class="docutils literal notranslate"><span class="pre">Finance</span> <span class="pre">inputs</span></code> file, which is located in the <em>Impact</em> folder of your
location folder. Let’s take a look at the inputs for the Bahraich case
study:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import pandas as pd
finance_inputs = pd.read_csv(&quot;/Users/prs09/Documents/CLOVER/Locations/Bahraich/Impact/Finance inputs.csv&quot;,header=None)
finance_inputs.head(len(finance_inputs))
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Discount rate</td>
      <td>0.100</td>
      <td>fraction</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PV cost</td>
      <td>500.000</td>
      <td>$/kWp</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PV O&amp;M</td>
      <td>5.000</td>
      <td>$/kWp p.a.</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PV cost decrease</td>
      <td>5.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Storage cost</td>
      <td>400.000</td>
      <td>$/kWh</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Storage O&amp;M</td>
      <td>10.000</td>
      <td>$/kWh p.a.</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Storage cost decrease</td>
      <td>5.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Diesel generator cost</td>
      <td>200.000</td>
      <td>$/kW</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Diesel generator cost decrease</td>
      <td>0.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Diesel fuel cost</td>
      <td>0.900</td>
      <td>$/litre</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Diesel fuel cost decrease</td>
      <td>-1.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Diesel O&amp;M</td>
      <td>20.000</td>
      <td>$/kW p.a.</td>
    </tr>
    <tr>
      <th>12</th>
      <td>BOS cost</td>
      <td>200.000</td>
      <td>$/kW</td>
    </tr>
    <tr>
      <th>13</th>
      <td>BOS cost decrease</td>
      <td>2.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>14</th>
      <td>PV installation cost</td>
      <td>100.000</td>
      <td>$/kW</td>
    </tr>
    <tr>
      <th>15</th>
      <td>PV installation cost decrease</td>
      <td>0.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Diesel installation cost</td>
      <td>50.000</td>
      <td>$/kW</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Diesel installation cost decrease</td>
      <td>0.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Connection cost</td>
      <td>100.000</td>
      <td>$/household</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Kerosene cost</td>
      <td>0.008</td>
      <td>$/hour</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Grid cost</td>
      <td>0.010</td>
      <td>$/kWh</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Grid extension cost</td>
      <td>5000.000</td>
      <td>$/km</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Grid infrastructure cost</td>
      <td>2000.000</td>
      <td>$</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Inverter cost</td>
      <td>200.000</td>
      <td>$/kW</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Inverter cost decrease</td>
      <td>2.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Inverter lifetime</td>
      <td>4.000</td>
      <td>years</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Inverter size increment</td>
      <td>1.000</td>
      <td>kW</td>
    </tr>
    <tr>
      <th>27</th>
      <td>Misc. costs</td>
      <td>0.000</td>
      <td>$/kW</td>
    </tr>
    <tr>
      <th>28</th>
      <td>General O&amp;M</td>
      <td>500.000</td>
      <td>$ p.a.</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>These variables describe the costs of the various elements of the energy
system and will be dependent on the specifics of your location; although
this is true for all of the input files, the costs are likely to vary
significantly between locations and can also have a relatively large
impact on the results of your optimisation. These data can be difficult
to assign specific values (for example if different suppliers have
different costs for a given component, or if lower costs are available
for purchasing larger quantities) so the general ethos should be to use
a value reflective of what is available for your location. Take care to
notice the units of each variable as using an input in the wrong units
would affect the costs significantly. The table below describes in more
detail what each variable means:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Discount</span> <span class="pre">rate</span></code></p></td>
<td><p>The discount rate or cost of
finance, expressed as a fraction</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of PV modules in $/kWp</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">O&amp;M</span></code></p></td>
<td><p>The annual cost of maintaining PV
modules in $/kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of PV
modules in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">cost</span></code></p></td>
<td><p>The cost of storage in $/kWh</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">O&amp;M</span></code></p></td>
<td><p>The annual cost of maintaining
storage in $/kWh</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of
storage in %</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">generator</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of a diesel generator in
$/kW</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">generator</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of a
diesel generator in  %</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">fuel</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of diesel fuel in $/litre</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">fuel</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of
diesel fuel in %</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">O&amp;M</span></code></p></td>
<td><p>The annual cost of maintaining
the diesel generator in $/kWh</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOS</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of balance of systems (BOS)
components for PV in $/kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BOS</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of BOS
components in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">installation</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of installing PV modules in
$/kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">installation</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of
installing PV modules in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">installation</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of installing diesel
generators in $/kW</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">installation</span> <span class="pre">cost</span> <span class="pre">decrea</span>
<span class="pre">se</span></code></p></td>
<td><p>The annual cost decrease of
installing diesel generators in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Connection</span> <span class="pre">cost</span></code></p></td>
<td><p>The cost of connecting a
household to the system in $</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Kerosene</span> <span class="pre">cost</span></code></p></td>
<td><p>The cost of using a kerosene lamp
for one hour in $</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">cost</span></code></p></td>
<td><p>The cost of grid electricity in
$/kWh</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">extension</span> <span class="pre">cost</span></code></p></td>
<td><p>The cost of extending the grid by
1 km in $</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">infrastructure</span> <span class="pre">cost</span></code></p></td>
<td><p>The cost of transformers (etc.)
to connect the system to the grid
in $</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">cost</span></code></p></td>
<td><p>Cost of an inverter in $/kW</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">cost</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual cost decrease of an
inverter in %</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">lifetime</span></code></p></td>
<td><p>The lifetime of an inverter in
years</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">size</span> <span class="pre">increment</span></code></p></td>
<td><p>The variety of available sizes of
inverters in kW</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Misc.</span> <span class="pre">costs</span></code></p></td>
<td><p>General miscellaneous
capacity-dependent costs for the
system in $/kW</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">General</span> <span class="pre">O&amp;M</span></code></p></td>
<td><p>General miscellaneous annual
costs for the system in $ per
year</p></td>
</tr>
</tbody>
</table>
<p>The first variable, <code class="docutils literal notranslate"><span class="pre">Discount</span> <span class="pre">rate</span></code>, describes the cost of financing
used when considering the value of money over time. This is input here
as a fraction, <code class="docutils literal notranslate"><span class="pre">0.1</span></code>, corresponding to a discount rate of 10%. The
cost of financing can vary significantly between countries and projects
depending on many factors, such as the risk associated with the project,
and can affect the cost effectiveness of different technologies: broadly
speaking, a high discount rate will discourage large initial investment
(for example in solar and storage capacity) and favour repeated
expenditure over time (for example on diesel fuel).</p>
<p>The costs of solar generation, diesel and storage technologies are
treated similarly. Each has a cost associated with purchasing the
equipment and maintaining it dependent on the total capacity installed,
and an annual cost decrease representing how costs of technology can
change over time (we define these variables as a decrease, so a positive
value represents costs falling over time whilst a negative value
represents them increasing). The diesel generator has additional
variables associated with the cost of fuel, solar generation has those
for balance of system components such as frames and wiring, and both
have costs of initially installing the generation capacity; these are
all treated in a similar way.</p>
<p>Two variables relate directly to households in the system. The first is
<code class="docutils literal notranslate"><span class="pre">Connection</span> <span class="pre">cost</span></code>, which represents the cost of connecting a household
to the system; this could include wiring, electricity meters,
installation costs, or any others related to providing a household with
a connection. The second is <code class="docutils literal notranslate"><span class="pre">Kerosene</span> <span class="pre">cost</span></code>, which is the cost that a
household incurs for using one kerosene lamp for one hour. This would
mainly be comprised of the cost of kerosene fuel, but could also include
a contribution to the cost of the lamp itself although this will likely
be negligible. This variable is used to calculate the spending on
kerosene by the community when electricity is unavailable.</p>
<p>The cost of electricity from the grid used by the system is assigned in
<code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">cost</span></code>. Additional costs associated with the national grid are
<code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">extension</span> <span class="pre">cost</span></code>, which represents the cost of extending the
network to the community being investigated if it is not currently
present there, and <code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">infrastructure</span> <span class="pre">cost</span></code>, which is the cost of
the transformers and other equipment used to convert power from the grid
for use in the local distribution network. At present
<code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">extension</span> <span class="pre">cost</span></code> is not used in the financial calculations, but
could be used in the future to calculate the breakeven distance at which
an off-grid system is more cost effective than extending the national
network.</p>
<p>Variables about the inverter used in the system are also included here,
with the cost and cost decrease acting similarly to those for generation
and storage capacities. In addition the lifetime of the inverter, in
years, is included to govern the points in the simulation at which the
inverter must be replaced and a new one is purchased; this is included
here as depending on the length of a simulation period and its point in
the overall lifetime of the system it may necessitate several, or no,
replacements. The <code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">size</span> <span class="pre">increment</span></code> variable describes the
capacity of inverters that are available to be used: for example if this
variable is set to 3 kW then the system can used an inverter with a 3
kW, 6 kW, or 9 kW (and so on) capacity, with the inverter being
oversized as necessary.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">Misc.</span> <span class="pre">costs</span></code> and <code class="docutils literal notranslate"><span class="pre">General</span> <span class="pre">O&amp;M</span></code> can be used to include any
additional miscellaneous costs that are not captured in the other
variables and that are dependent on either the capacity of the system or
are annually recurring, respectively.</p>
<p>If you are not using certain technologies in your investigation then it
is not necessary to provide values for all of the variables included
here. For example, if you are evaluating a solar and battery storage
system operating far from the national grid network, you do not need to
input values relating to diesel generators, fuel, or the cost of
electricity from the national grid. In this case it is best to leave the
default values in place or set them to zero, rather than delete them, to
ensure that you do not introduce any issues in the way that CLOVER reads
the CSV file.</p>
<p>These variables are designed to enumerate the financial inputs into
separate and easy-to-update categories, but some can be combined if
necessary if their units allows. For example, if a supplier is offering
that a complete solar system can be installed for a given price, this
can be captured in <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">cost</span></code> on its own rather than also trying to
assign values to <code class="docutils literal notranslate"><span class="pre">BOS</span> <span class="pre">cost</span></code> and <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">installation</span> <span class="pre">cost</span></code> (which here
could be set to zero as they are included in <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">cost</span></code>). Likewise if
the system is maintained by a single operator, and is not dependent on
the capacity that has been installed, it may make more sense to include
their salary in <code class="docutils literal notranslate"><span class="pre">General</span> <span class="pre">O&amp;M</span></code> and set <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">O&amp;M</span></code> (etc.) to be zero;
this method would not consider other capacity-dependent costs however,
such as minor replacement parts.</p>
<p><strong>Complete the</strong> <code class="docutils literal notranslate"><span class="pre">Finance</span> <span class="pre">inputs</span></code> <strong>CSV file with the financial
information for your investigation.</strong></p>
</section>
<section id="environmental-inputs">
<h3>Environmental inputs<a class="headerlink" href="#environmental-inputs" title="Permalink to this headline"></a></h3>
<p>CLOVER allows users to analyse the environmental impact of their systems
to explore the potential benefits of low-carbon energy technologies. At
present these are considered using the greenhouse gas (GHG) emissions of
the various technologies both in terms of embedded GHGs from their
manufacture and the impact over their lifetimes, for example through the
carbon intensity of the electricity they provide. These can be compared
to alternatives, such as the carbon intensity of the national grid
network, to advocate for cleaner sources of power.</p>
<p>The inputs for the environmental impact of the system are included in
the <code class="docutils literal notranslate"><span class="pre">GHG</span> <span class="pre">inputs</span></code> file, which is located in the <em>Impact</em> folder of your
location folder. Let’s take a look at the inputs for the Bahraich case
study:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>GHG_inputs = pd.read_csv(&quot;/Users/prs09/Documents/CLOVER/Locations/Bahraich/Impact/GHG inputs.csv&quot;,header=None)
GHG_inputs.head(len(GHG_inputs))
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>PV GHGs</td>
      <td>3000.000</td>
      <td>kgCO2/kWp</td>
    </tr>
    <tr>
      <th>1</th>
      <td>PV O&amp;M GHGs</td>
      <td>5.000</td>
      <td>kgCO2/kWp p.a.</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PV GHG decrease</td>
      <td>5.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>3</th>
      <td>Storage GHGs</td>
      <td>110.000</td>
      <td>kgCO2/kWh</td>
    </tr>
    <tr>
      <th>4</th>
      <td>Storage O&amp;M GHGs</td>
      <td>5.000</td>
      <td>kgCO2/kWh p.a.</td>
    </tr>
    <tr>
      <th>5</th>
      <td>Storage GHG decrease</td>
      <td>5.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Diesel generator GHGs</td>
      <td>2000.000</td>
      <td>kgCO2/kW</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Diesel generator GHG decrease</td>
      <td>0.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Diesel fuel GHGs</td>
      <td>2.000</td>
      <td>kgCO2/litre</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Diesel O&amp;M GHGs</td>
      <td>10.000</td>
      <td>kgCO2/kW p.a.</td>
    </tr>
    <tr>
      <th>10</th>
      <td>BOS GHGs</td>
      <td>200.000</td>
      <td>kgCO2/kW</td>
    </tr>
    <tr>
      <th>11</th>
      <td>BOS GHG decrease</td>
      <td>2.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>12</th>
      <td>PV installation GHGs</td>
      <td>50.000</td>
      <td>kgCO2/kW</td>
    </tr>
    <tr>
      <th>13</th>
      <td>PV installation GHG decrease</td>
      <td>0.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>14</th>
      <td>Diesel installation GHGs</td>
      <td>50.000</td>
      <td>kgCO2/kW</td>
    </tr>
    <tr>
      <th>15</th>
      <td>Diesel installation GHG decrease</td>
      <td>0.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>16</th>
      <td>Connection GHGs</td>
      <td>10.000</td>
      <td>kgCO2/household</td>
    </tr>
    <tr>
      <th>17</th>
      <td>Kerosene GHGs</td>
      <td>0.055</td>
      <td>kgCO2/hour</td>
    </tr>
    <tr>
      <th>18</th>
      <td>Grid GHGs (initial)</td>
      <td>0.800</td>
      <td>kgCO2/kWh</td>
    </tr>
    <tr>
      <th>19</th>
      <td>Grid GHGs (final)</td>
      <td>0.400</td>
      <td>kgCO2/kWh</td>
    </tr>
    <tr>
      <th>20</th>
      <td>Grid extension GHGs</td>
      <td>290000.000</td>
      <td>kgCO2/km</td>
    </tr>
    <tr>
      <th>21</th>
      <td>Grid infrastructure GHGs</td>
      <td>1200000.000</td>
      <td>kgCO2</td>
    </tr>
    <tr>
      <th>22</th>
      <td>Inverter GHGs</td>
      <td>75.000</td>
      <td>kgCO2/kW</td>
    </tr>
    <tr>
      <th>23</th>
      <td>Inverter GHG decrease</td>
      <td>2.000</td>
      <td>% p.a.</td>
    </tr>
    <tr>
      <th>24</th>
      <td>Inverter lifetime</td>
      <td>4.000</td>
      <td>years</td>
    </tr>
    <tr>
      <th>25</th>
      <td>Inverter size increment</td>
      <td>1.000</td>
      <td>kW</td>
    </tr>
    <tr>
      <th>26</th>
      <td>Misc. GHGs</td>
      <td>0.000</td>
      <td>kgCO2/kW</td>
    </tr>
    <tr>
      <th>27</th>
      <td>General O&amp;M GHGs</td>
      <td>200.000</td>
      <td>kgCO2 p.a.</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Similarly to the financial inputs, the environmental inputs consider the
initial impact of installing the technologies (the embedded GHG
emissions from their manufacture) and the impact of maintaining them, as
well as the potential for technologies to decrease their impact over
time as manufacturing becomes more efficient, for example. These data
are typically much more difficult to identify values for as the
environmental impact is rarely considered in such detail, if at all, as
a secondary metric to the financial impact. As a result it may be better
to either use the default values provided or set them to zero to
disregard them depending on the nature of your investigation; either may
be appropriate, as long as the decision is acknowledged and justified
where necessary. The table below describes in more detail what each
variable means:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of PV modules in kgCO2/kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">O&amp;M</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The annual cost of maintaining PV
modules in kgCO2/kWp</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">GHGs</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual GHG decrease of PV
modules in %</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The GHGs of storage in kgCO2/kWh</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">O&amp;M</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The annual GHGs of maintaining
storage in kgCO2/kWh</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">GHGs</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual GHG decrease of
storage in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">generator</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of a diesel generator in
kgCO2/kW</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">generator</span> <span class="pre">GHG</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual GHG decrease of a
diesel generator in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">fuel</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of diesel fuel in
kgCO2/litre</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">O&amp;M</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The annual GHGs of maintaining
the diesel generator in kgCO2/kWh</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">BOS</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of balance of systems (BOS)
components for PV in kgCO2/kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">BOS</span> <span class="pre">GHGs</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual GHG decrease of BOS
components in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">installation</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of installing PV modules in
kgCO2/kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">installation</span> <span class="pre">GHGs</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual GHG decrease of
installing PV modules in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">installation</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of installing diesel
generators in kgCO2/kW</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">installation</span> <span class="pre">GHGs</span> <span class="pre">decrea</span>
<span class="pre">se</span></code></p></td>
<td><p>The annual GHGs decrease of
installing diesel generators in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Connection</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The GHGs of connecting a
household to the system in kgCO2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Kerosene</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The GHGs of using a kerosene lamp
for one hour in kgCO2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">GHGs</span> <span class="pre">(initial)</span></code></p></td>
<td><p>The GHGs of grid electricity at
the start of the time period in
kgCO2/kWh</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">GHGs</span> <span class="pre">(final)</span></code></p></td>
<td><p>The GHGs of grid electricity at
the end of the time period in
kgCO2/kWh</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">extension</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The GHGs of extending the grid by
1 km in kgCO2</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">infrastructure</span> <span class="pre">GHGs</span></code></p></td>
<td><p>The GHGs of transformers (etc.)
to connect the system to the grid
in kgCO2</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">GHGs</span></code></p></td>
<td><p>GHGs of an inverter in kgCO2/kW</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">GHGs</span> <span class="pre">decrease</span></code></p></td>
<td><p>The annual GHG decrease of an
inverter in %</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">lifetime</span></code></p></td>
<td><p>The lifetime of an inverter in
years</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Inverter</span> <span class="pre">size</span> <span class="pre">increment</span></code></p></td>
<td><p>The variety of available sizes of
inverters in kW</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Misc.</span> <span class="pre">GHGs</span></code></p></td>
<td><p>General miscellaneous
capacity-dependent GHGs for the
system in kgCO2/kW</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">General</span> <span class="pre">O&amp;M</span> <span class="pre">GHGs</span></code></p></td>
<td><p>General miscellaneous annual GHGs
for the system in kgCO2 per year</p></td>
</tr>
</tbody>
</table>
<p>Almost all of the variables in the above table are environmental
analogues to those in the financial inputs and therefore their
descriptions will not be repeated here. The exceptions to this are
<code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">GHGs</span> <span class="pre">(initial)</span></code> and <code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">GHGs</span> <span class="pre">(final)</span></code>, which describe the
emissions intensity of the grid network at the start and end of the
considered lifetime of the system respectively. These allow the user to
take into account how the electricity grid might be decarbonised over
time in line with national policy objectives, which would have a
subsequent impact on the GHGs of a system using grid electricity
throughout its lifetime.</p>
<p>In general many of the technologies have relatively carbon-intensive
manufacturing processes, such as processing silicon for solar panels and
smelting metals for balance of systems components and wiring, whilst
diesel fuel has notoriously high emissions from its usage. Emissions
associated with operation and maintenance could come from the
maintenance itself (for example replacement parts) or other
considerations, such as the GHGs of a worker travelling to the site; in
practice, however, these O&amp;M emissions are usually dwarfed by the
embedded emissions of equipment and those from diesel fuel and the
national grid. Emissions from transporting equipment are not explicitly
included but can be implicitly included by adding them to the
appropriate variables, for example setting <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">GHGs</span></code> to a value
including both the emissions from manufacturing a panel and from
shipping it to the installation site (both in terms of capacity, here
kgCO2/kWp).</p>
<p><strong>Complete the</strong> <code class="docutils literal notranslate"><span class="pre">GHG</span> <span class="pre">inputs</span></code> <strong>CSV file with the financial information
for your investigation.</strong></p>
</section>
<section id="optimisation-inputs">
<h3>Optimisation inputs<a class="headerlink" href="#optimisation-inputs" title="Permalink to this headline"></a></h3>
<p>The optimisation process in CLOVER is mostly automatic but in order for
it to work we need to state the conditions under which it should
operate. CLOVER performs a large number of system simulations, each with
different combinations of generation and storage capacity sizes, and
appraises them based on their technical, financial and environmental
performances; depending on our interests, any of them might be
considered “the best”. For this reason we need to provide CLOVER with
some details about what we consider to be the “optimum” system using two
variables that we define:</p>
<ul class="simple">
<li><p>The <em>threshold criterion</em>, which determines whether a simulated system meets the standards required to be considered as a potential optimum system, and</p></li>
<li><p>The <em>optimisation criterion</em>, which determines which of the potential systems is selected to be the best.</p></li>
</ul>
<p>Simply put, the threshold criterion decides whether a system meets our
stated needs and, as many systems are likely to be able to meet our
needs, the optimisation criterion selects the one that performs the best
according to its financial or environmental impact. As an example,
consider that we want to design a system which provides electricity 95%
of the time or more: clearly many systems will be able to do that, some
much larger than would be affordable, so we decide that the one which
provides the lowest cost of electricity would be best. Here we would
define the threshold criterion to be <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> (from
earlier set to a value of <code class="docutils literal notranslate"><span class="pre">0.05</span></code> (i.e. a
maximum of 5% blackouts), whilst the optimisation criterion would be the
levelised cost of used electricity in $/kWh (LCUE, explained further
later) with the lowest being the best. CLOVER would then identify a
system which meets those two criteria, and give us a range of other
impact metrics as well.</p>
<p>We also need to provide information about scenario we are investigating:
optimising over different time periods will potentially provide
different results as resource generation, load demands, technological
performance and degradation all change over time. CLOVER uses a
step-by-step optimisation process which divides the total investigation
lifetime into shorter time periods; this allows us to replicate the
process of designing a system to meet some future needs, then revisiting
the system after a few years to upgrade it as necessary to meet a
growing demand or maintain its performance. This also allows us to
consider that additional capacity in the context of what has already
been installed, adding only what is necessary rather than overhauling
the existing equipment.</p>
<p>The inputs for the optimisation parameters are included in the
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> file, which is located in the <em>Optimisation</em>
folder of your location folder. Let’s take a look at the inputs for the
Bahraich case study:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>optimisation_inputs = pd.read_csv(&quot;/Users/prs09/Documents/CLOVER/Locations/Bahraich/Optimisation/Optimisation inputs.csv&quot;,header=None)
optimisation_inputs.head(len(optimisation_inputs))
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>Scenario length</td>
      <td>12</td>
      <td>years</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>Iteration length</td>
      <td>4</td>
      <td>years</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>2</th>
      <td>PV size (min)</td>
      <td>0</td>
      <td>kWp</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>3</th>
      <td>PV size (max)</td>
      <td>1</td>
      <td>kWp</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>4</th>
      <td>PV size (step)</td>
      <td>5</td>
      <td>kWp</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>5</th>
      <td>PV size (increase)</td>
      <td>0</td>
      <td>kWp</td>
      <td>Set to 0 to ignore</td>
    </tr>
    <tr>
      <th>6</th>
      <td>Storage size (min)</td>
      <td>0</td>
      <td>kWh</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>7</th>
      <td>Storage size (max)</td>
      <td>1</td>
      <td>kWh</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>8</th>
      <td>Storage size (step)</td>
      <td>5</td>
      <td>kWh</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>9</th>
      <td>Storage size (increase)</td>
      <td>0</td>
      <td>kWh</td>
      <td>Set to 0 to ignore</td>
    </tr>
    <tr>
      <th>10</th>
      <td>Threshold criterion</td>
      <td>Blackouts</td>
      <td>Name of column from appraisal</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>11</th>
      <td>Threshold value</td>
      <td>0.05</td>
      <td>Max/min value permitted (see guidance)</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>12</th>
      <td>Optimisation criterion</td>
      <td>LCUE ($/kWh)</td>
      <td>Name of column from appraisal</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Some of the variables included in the <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV file
are not used by the current optimisation function. These were left over
from previous processes which have since been improved to increase the
speed and efficiency of the overall optimisation. These previous
functions (and their input variables) are <em>deprecated</em>, meaning that
they are not used by the standard processes in the model but are still
present in dormant sections of the code and can be used if specifically
desired by the user. For clarity, these functions are not covered in
this document but their variables are still included in the
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV file for completeness.</p>
<p>The table below describes in more detail what each variable means:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">length</span></code></p></td>
<td><p>Total length of the investigation
period in years</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Iteration</span> <span class="pre">length</span></code></p></td>
<td><p>Length of each step-by-step time
period in years</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(min)</span></code></p></td>
<td><p>Minimum size of PV capacity to be
considered in kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(max)</span></code></p></td>
<td><p><em>Deprecated</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span></code></p></td>
<td><p>Optimisation resolution for PV
size in kWp</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(increase)</span></code></p></td>
<td><p><em>Deprecated</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(min)</span></code></p></td>
<td><p>Minimum size of storage capacity
to be considered in kWh</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(max)</span></code></p></td>
<td><p><em>Deprecated</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(step)</span></code></p></td>
<td><p>Optimisation resolution for
storage size in kWh</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(increase)</span></code></p></td>
<td><p><em>Deprecated</em></p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span></code></p></td>
<td><p>Criterion for identifying
sufficient systems</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span></code></p></td>
<td><p>Value required for a system to be
considered sufficient</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">criterion</span></code></p></td>
<td><p>Criterion for identifying optimum
system</p></td>
</tr>
</tbody>
</table>
<p>Two variables control the length of the investigation period and that of
each of the sub-periods, with the total <code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">length</span></code> comprised of
several <code class="docutils literal notranslate"><span class="pre">Iteration</span> <span class="pre">length</span></code>. For example, setting
<code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">length</span> <span class="pre">=</span> <span class="pre">12</span></code> and <code class="docutils literal notranslate"><span class="pre">Iteration</span> <span class="pre">length</span> <span class="pre">=</span> <span class="pre">4</span></code> would mean that
there would be three distinct periods: the first considering the first
four years, the second considering the next four years (including the
performance of the system that was already installed for the period
before), and the third considering the last set of four years (again
including the periods before). <code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">length</span></code> must be a multiple of
<code class="docutils literal notranslate"><span class="pre">Iteration</span> <span class="pre">length</span></code> for the optimisation process to work, and
<code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">length</span></code> can be any length up to the total investigation
lifetime we defined in defined earlier to be 20 years.</p>
<p>The optimisation process in CLOVER first considers a system with the
smallest generation and storage capacity and gradually increases it
until it finds one that meets the threshold criterion. The first system
it considers at the start of the investigation period, with the smallest
installed capacity, is defined by <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(min)</span></code> and
<code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(min)</span></code>. These variables identify the starting point of
the optimisation which, for many, would be no installed capacity at all
- meaning <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(min)</span> <span class="pre">=</span> <span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(min)</span> <span class="pre">=</span> <span class="pre">0</span></code>. If there
is already a system in place then set these variables to the capacity of
that system. When CLOVER moves on to the second (or later) iterations
during the optimisation process it automatically considers the capacity
that was installed during the previous time period.</p>
<p>The optimisation function requires the user to define the resolution of
the investigation, defined through the variables <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span></code> and
<code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(step)</span></code> respectively: once CLOVER has investigated a
system it then analyses one with a larger capacity, with the increase in
capacity of the next system defined by these two variables. For example,
with <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span> <span class="pre">=</span> <span class="pre">1</span></code> CLOVER would consider systems with
<code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">1,</span> <span class="pre">2,</span> <span class="pre">3,</span> <span class="pre">...</span></code> whereas <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span> <span class="pre">=</span> <span class="pre">5</span></code> would
consider <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">5,</span> <span class="pre">10,</span> <span class="pre">15,</span> <span class="pre">...</span></code>, with the same logic being true
for <code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(step)</span></code>. Both variables can be set to different
values, and can be non-integers. For an investigation of a theoretical
system then choosing a round number for the step size might be more
convenient, but for a real investigation it could be better to use the
real available capacity of the equipment being installed. For example,
if you know that the system will be build using solar panels with a
capacity of 350 Wp, you could choose to use <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span> <span class="pre">=</span> <span class="pre">0.35</span></code>.</p>
<p><code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span></code> is the name of the variable being used to decide
whether a system provides sufficient performance to be considered as a
potential optimum system, as described earlier, with <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span></code>
being the value it must meet. The choices for <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span></code>
are described later in described later and
CLOVER knows automatically whether the <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span></code> should be
considered as a maximum or minimum value: for example, if
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span> <span class="pre">=</span> <span class="pre">Blackouts</span></code> then CLOVER interprets
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.05</span></code> as systems are permitted to have blackout
periods for a maximum of 5% of the time. <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">criterion</span></code>,
meanwhile, is the variable being used to select the optimum system and
CLOVER similarly knows whether this should be interpreted as a maximum
or minimum: for example, <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">criterion</span> <span class="pre">=</span> <span class="pre">LCUE</span> <span class="pre">($/kWh)</span></code> would
be used to find the lowest cost of electricity. Take care that the
inputs for <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span></code> and <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">criterion</span></code> are
spelled correctly, otherwise the optimisation process will not work.</p>
</section>
<section id="considerations">
<h3>Considerations<a class="headerlink" href="#considerations" title="Permalink to this headline"></a></h3>
<p>CLOVER can take a number of variables as either the threshold or
optimisation criteria and these should be chosen to best reflect the
context of the investigation and its goals. Typically the threshold
criterion relates to the technological performance of the system on the
basis that, in order for a system to be viable, it needs to be able to
provide a minimum level of service to the community which is (almost
always) based on its core technical functionality, rather than economic
or environmental factors. The level of service availability, either in
terms of the time energy is (un)available or the proportion of demanded
that should be met, are the most commonly used threshold criteria.
Selecting an appropriate threshold value will vary depending on the
situation, for example a system for basic domestic applications could
permit blackouts 5-10% of the time whilst one for a hospital may need 0%
system downtime.</p>
<p>The optimisation criterion, meanwhile, is typically a measure of the
system impact either in financial or environmental terms. Most commonly
this is the levelised cost of used electricity (LCUE, measured in
$/kWh), which considers the cost of power over the lifetime of the
system and is normally most relevant to system designers, but could also
be other financial metrics such as the total system cost which may be
more relevant to donor-led projects. Environmental analogues of these
metrics, such as the emissions intensity of electricity or the
cumulative GHG emissions, may be more relevant for projects driven by
climate change objectives.</p>
<p>Whilst a single criterion must be selected for use in the optimisation
process, as we will see in we will see later
the optimisation process gives us all of the available outputs and so we
can investigate all of them for an optimum system configuration. Using
different optimisation criteria may yield different results but often
the optimum systems will be relatively similar: for a given level of
service availability, it is likely that the capacity of a system
optimised for lowest cost of electricity will be similar to one
optimised for lowest cumulative cost, but may not be identical.</p>
<p>Choosing the resolution of an optimisation is a trade-off between
precision and computation time. Taking the above example of 1 kWp or 5
kWp resolutions, the former method would be more likely to suggest a
system closer to the true optimum: for example, if the true optimum
system (if it were possible to know it exactly) has <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">7</span></code> then
the former method would be able to find it, but the latter method would
suggest either <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">5</span></code> or <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">10</span></code>, depending on how the
other aspects of system influence this. Even if the true optimum system
is actually <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">7.2</span></code>, the former method still gets closer.</p>
<p>The importance of a precise answer will depend on the requirements of
your investigation, the size of the system, your available processing
power and your patience, so there is no exact answer for the “best” step
sizes to use. In general, it is good practice to run an initial
optimisation with a low resolution (e.g. <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">10</span></code>) to get an
idea of the order of magnitude of the system: if the optimum output for
this trial run is <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">20</span></code>, it would be appropriate to re-run
the optimisation with a higher resolution (e.g. step sizes of 1 kWp or 5
kWp) to gain greater precision. If the output is <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">300</span></code>, it
might be better to increase the step size (e.g. to 20 kWp) to reduce
computational time.</p>
<p>The optimisation process CLOVER uses provides the optimum system for the
iteration period under consideration, which is not necessarily the same
as one for the entire lifetime of the system. This is to replicate
real-life system design and the timeframes of community energy projects,
where plans are built around time horizons of a few years owing to
practical constraints such as funding, the limits of demand prediction,
or the likelihood of altering the business model. This also matches a
reasonable timeframe of making major upgrades to the system, for example
returning to the site every few years to perform capacity upgrades to
meet a growing demand. As such CLOVER identifies the optimum system for
the next short-term time window, providing the system that best meets
the requirements for the next stage of design, before moving on to the
next stage in time. This allows users to know the optimum system for the
immediate future and what subsequent system upgrades might look like to
maintain that optimum performance. As will all predictions the further
into the future you consider the greater uncertainty there is, but
remember that you can always return in a few years’ time to re-run your
optimisation when it’s time to upgrade your system.</p>
<p>As a result the of the precision of your system, the CLOVER optimisation
process might suggest different pathways of capacity sizing over the
lifetime of the system. In the example above, if a system requires
<code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">7.2</span></code> in its first period and <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">12.1</span></code> in its
second then using a <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span></code> of 1 kWp would probably give
<code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">7</span></code> and <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">12</span></code>, but using a step size of 10 kWp
might give <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">10</span></code> for both periods. The latter case might have
evaluated the relative costs and benefits of increasing the capacity to
<code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">=</span> <span class="pre">20</span></code> and found that (for example) increasing the storage
capacity instead was more worthwhile. The precision we chose has
therefore locked the two optimisations into different pathways, one with
a larger PV capacity and one with a larger storage capacity; both will
provide the same level of service (as the threshold criteria are the
same in both cases) but the optimisation impacts such as the costs will
be different. In some cases this effect can be exacerbated over several
time periods, but in general the most effective way to mitigate this is
through using higher precision in your optimisations to stay as close as
possible to the true optimum system.</p>
<p><strong>Complete the</strong> <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> <strong>CSV file with the optimisation
information for your investigation.</strong></p>
</section>
</section>
<section id="performing-an-optimisation-of-an-energy-system">
<h2>Performing an optimisation of an energy system<a class="headerlink" href="#performing-an-optimisation-of-an-energy-system" title="Permalink to this headline"></a></h2>
<section id="id1">
<h3>Preparation<a class="headerlink" href="#id1" title="Permalink to this headline"></a></h3>
<p>We are now able to perform an optimisation of an energy system using the
Optimisation module. This relies on all of the information we have input
and generated previously in the electricity system simulation section and
the earlier parts of this section. This will let us identify the optimum
system, find its solar and battery capacity, and get information about
its technological performance and its financial and environmental
impacts.</p>
<p>To perform an optimisation we must first <strong>run the Optimisation script
(using the green arrow in the Spyder console)</strong>, which we do here using
the following:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import sys
sys.path.insert(0, &#39;/Users/prs09/Documents/CLOVER/Scripts/Optimisation scripts/&#39;)
from Optimisation import Optimisation
</pre></div>
</div>
<p>The optimisation function we will use does not take any arguments from
the console as they are all included in the previous CSV files. We can
override them in the function but this is generally for specific
applications which are not relevant here.</p>
</section>
<section id="running-an-optimisation">
<h3>Running an optimisation<a class="headerlink" href="#running-an-optimisation" title="Permalink to this headline"></a></h3>
<p>To run an optimisation we <strong>run the following function in the console</strong>,
saving the output as a variable called <code class="docutils literal notranslate"><span class="pre">example_optimisation</span></code> so we
can look at the outputs in more detail:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">example_optimisation</span> <span class="o">=</span> <span class="n">Optimisation</span><span class="p">()</span><span class="o">.</span><span class="n">multiple_optimisation_step</span><span class="p">()</span>
</pre></div>
</div>
<p>This will run the optimisation function, which automatically simulates a
variety of systems with different capacity sizes until it finds the
optimum configuration. <strong>The optimisation process can take a long time
to complete</strong>, ranging from minutes to hours depending on your scenario
and available computing resources (hence the advice to begin at a
relatively low resolution to get an idea of the expected system size).
If you need to cancel the optimisation function before it completes,
click on the console and press <code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">C</span></code> on your keyboard.</p>
<p>Whilst the optimisation function runs it outputs some information to the
screen to update on its progress. An example is below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Step</span> <span class="mi">1</span> <span class="n">of</span> <span class="mi">3</span>

<span class="n">Time</span> <span class="n">taken</span> <span class="k">for</span> <span class="n">simulation</span><span class="p">:</span> <span class="mf">0.16</span> <span class="n">seconds</span> <span class="n">per</span> <span class="n">year</span>

<span class="n">Current</span> <span class="n">system</span><span class="p">:</span> <span class="n">Blackouts</span> <span class="o">=</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">Target</span> <span class="o">=</span> <span class="mf">0.05</span>
</pre></div>
</div>
<p>In this case, the function is considering the first four-year period in
the twelve-year lifetime (<code class="docutils literal notranslate"><span class="pre">Step</span> <span class="pre">1</span> <span class="pre">of</span> <span class="pre">3</span></code>). As before when running a
simulation, it prints information about the speed at which the
simulations are being performed. Finally it presents some information
about the performance of the system it just simulated in terms of the
chosen threshold criterion (<code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.1</span></code>) and the desired target
set by the <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV file (<code class="docutils literal notranslate"><span class="pre">Target</span> <span class="pre">=</span> <span class="pre">0.05</span></code>).</p>
<p>In this case, we can notice that all of the systems have
<code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.1</span></code> or lower, even for the very first system that is
simulated which has <code class="docutils literal notranslate"><span class="pre">PV_size</span> <span class="pre">=</span> <span class="pre">0</span></code> and <code class="docutils literal notranslate"><span class="pre">storage_size</span> <span class="pre">=</span> <span class="pre">0</span></code>. This is
because the <code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">backup</span> <span class="pre">=</span> <span class="pre">Y</span></code> and <code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">backup</span> <span class="pre">threshold</span> <span class="pre">=</span> <span class="pre">0.1</span></code>
(from earlier) which means that the diesel
generator is activated to provide <code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.1</span></code> at the very least.
Because we set the threshold criterion higher than this, the system is
unable to use diesel alone to meet the requirements thereby forcing it
to install some renewable capacity to reach <code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.05</span></code>. We
could have set <code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">backup</span> <span class="pre">threshold</span> <span class="pre">=</span> <span class="pre">0.05</span></code> to potentially allow
the use of diesel generation to meet our target, but in our case this
results in a diesel-dominated system which doesn’t provide a good
example!</p>
<p>A few other statements are shown in the console that update you on what
the optimisation process is doing. <code class="docutils literal notranslate"><span class="pre">Using</span> <span class="pre">single</span> <span class="pre">line</span> <span class="pre">optimisation</span></code>
means that CLOVER is scanning along a fixed capacity of either PV or
storage whilst varying the other, whilst <code class="docutils literal notranslate"><span class="pre">Increasing</span> <span class="pre">storage</span> <span class="pre">size</span></code> and
<code class="docutils literal notranslate"><span class="pre">Increasing</span> <span class="pre">PV</span> <span class="pre">size</span></code> describe the steps CLOVER is taking to identify
the optimum system by checking larger configurations. These are for
information only so there is no need to do anything with this
information.</p>
<p>Finally, when the optimisation is complete, you receive the message:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Time</span> <span class="n">taken</span> <span class="k">for</span> <span class="n">optimisation</span><span class="p">:</span> <span class="mi">10</span><span class="p">:</span><span class="mi">15</span> <span class="n">minutes</span>
</pre></div>
</div>
<p>This lets you know how long the entire optimisation process took (in
this case just over 10 minutes). This is for information only but you
can use it to judge how to amend your resolution for your next
optimisation, or to know approximately how long you will need to wait
next time you optimise the system.</p>
<p>Opening the <code class="docutils literal notranslate"><span class="pre">example_optimisation</span></code> variable allows us to view the
results of the optimisation function, which are presented in a table.
Each row corresponds to an iteration period (in our case, three) with
the columns describing the results for each stage of the optimisation.
There is a large number of results and so we will discuss them in more
detail later.</p>
</section>
<section id="saving-optimisation-results-and-opening-saved-files">
<h3>Saving optimisation results and opening saved files<a class="headerlink" href="#saving-optimisation-results-and-opening-saved-files" title="Permalink to this headline"></a></h3>
<p>Similarly to the reasons for saving simulation results described earlier
it is
important to save the optimisation results for future reference. It is
especially important because of the time it takes to run optimisations,
which can be much longer than any single simulation.</p>
<p>CLOVER provides a function to save the output of optimisations as CSV
files, storing the data much more conveniently. To save an output
(<code class="docutils literal notranslate"><span class="pre">optimisation_name</span></code>) we need to have first stored it as a variable,
and choose a filename (<code class="docutils literal notranslate"><span class="pre">filename</span></code>) to store it (note that the
<code class="docutils literal notranslate"><span class="pre">filename</span></code> variable in this function must be a string). In our case
<code class="docutils literal notranslate"><span class="pre">optimisation_name</span></code> = <code class="docutils literal notranslate"><span class="pre">example_optimisation</span></code>, and we choose
<code class="docutils literal notranslate"><span class="pre">file_name</span> <span class="pre">=</span> <span class="pre">'my_saved_optimisation'</span></code>. <strong>To save the optimisation
results we run the function</strong>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Optimisation</span><span class="p">()</span><span class="o">.</span><span class="n">save_optimisation</span><span class="p">(</span><span class="n">optimisation_name</span> <span class="o">=</span> <span class="n">example_optimisation</span><span class="p">,</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;my_saved_optimisation&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This function creates a new CSV file in the <em>Saved optimisations</em> folder
in the <em>Optimisation</em> folder in your location folder titled
<code class="docutils literal notranslate"><span class="pre">my_saved_optimisation.csv</span></code>. If the filename variable is left blank,
the title of the CSV defaults to the time the save operation was
performed. Be aware that running this function with a filename that
already exists will overwrite the existing file.</p>
<p>To open a saved file, we use the name of the CSV file to open the
correct result, for example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">opened_optimisation</span> <span class="o">=</span> <span class="n">Optimisation</span><span class="p">()</span><span class="o">.</span><span class="n">open_optimisation</span><span class="p">(</span><span class="n">filename</span> <span class="o">=</span> <span class="s1">&#39;my_saved_optimisation&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This will open the <code class="docutils literal notranslate"><span class="pre">my_saved_optimisation.csv</span></code> file and record the
data as a new variable, <code class="docutils literal notranslate"><span class="pre">opened_optimisation</span></code>, which will be in the
same format as the original saved variable <code class="docutils literal notranslate"><span class="pre">example_optimisation</span></code>.</p>
</section>
<section id="optimisation-results">
<h3>Optimisation results<a class="headerlink" href="#optimisation-results" title="Permalink to this headline"></a></h3>
<p>Our optimisation function gives us a large number of results in its
output variable. Let’s open the example saved optimisation file, located
in the <em>Bahraich</em> folder:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>opened_optimisation = Optimisation().open_optimisation(filename = &#39;my_saved_optimisation&#39;)
opened_optimisation.T.head(len(opened_optimisation.T)).round(3)
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>0</th>
      <th>0</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Start year</th>
      <td>0.000</td>
      <td>4.000</td>
      <td>8.000</td>
    </tr>
    <tr>
      <th>End year</th>
      <td>4.000</td>
      <td>8.000</td>
      <td>12.000</td>
    </tr>
    <tr>
      <th>Initial PV size</th>
      <td>10.000</td>
      <td>20.000</td>
      <td>30.000</td>
    </tr>
    <tr>
      <th>Initial storage size</th>
      <td>40.000</td>
      <td>70.000</td>
      <td>100.000</td>
    </tr>
    <tr>
      <th>Final PV size</th>
      <td>9.600</td>
      <td>19.200</td>
      <td>28.800</td>
    </tr>
    <tr>
      <th>Final storage size</th>
      <td>34.915</td>
      <td>60.884</td>
      <td>86.162</td>
    </tr>
    <tr>
      <th>Diesel capacity</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Cumulative cost ($)</th>
      <td>29618.740</td>
      <td>46665.340</td>
      <td>58062.030</td>
    </tr>
    <tr>
      <th>Cumulative system cost ($)</th>
      <td>28863.620</td>
      <td>45517.130</td>
      <td>56608.180</td>
    </tr>
    <tr>
      <th>Cumulative GHGs (kgCO2eq)</th>
      <td>55702.070</td>
      <td>110820.050</td>
      <td>169535.870</td>
    </tr>
    <tr>
      <th>Cumulative system GHGs (kgCO2eq)</th>
      <td>48801.380</td>
      <td>98672.910</td>
      <td>151484.150</td>
    </tr>
    <tr>
      <th>Cumulative energy (kWh)</th>
      <td>53963.453</td>
      <td>153124.929</td>
      <td>310774.471</td>
    </tr>
    <tr>
      <th>Cumulative discounted energy (kWh)</th>
      <td>44290.408</td>
      <td>99759.179</td>
      <td>160367.390</td>
    </tr>
    <tr>
      <th>LCUE ($/kWh)</th>
      <td>0.652</td>
      <td>0.456</td>
      <td>0.353</td>
    </tr>
    <tr>
      <th>Emissions intensity (gCO2/kWh)</th>
      <td>904.341</td>
      <td>644.395</td>
      <td>487.441</td>
    </tr>
    <tr>
      <th>Blackouts</th>
      <td>0.043</td>
      <td>0.039</td>
      <td>0.049</td>
    </tr>
    <tr>
      <th>Unmet energy fraction</th>
      <td>0.029</td>
      <td>0.026</td>
      <td>0.030</td>
    </tr>
    <tr>
      <th>Renewables fraction</th>
      <td>0.764</td>
      <td>0.767</td>
      <td>0.768</td>
    </tr>
    <tr>
      <th>Total energy (kWh)</th>
      <td>53963.453</td>
      <td>99161.476</td>
      <td>157649.542</td>
    </tr>
    <tr>
      <th>Total load energy (kWh)</th>
      <td>54635.778</td>
      <td>100110.598</td>
      <td>159832.375</td>
    </tr>
    <tr>
      <th>Unmet energy (kWh)</th>
      <td>1610.022</td>
      <td>2633.543</td>
      <td>4726.531</td>
    </tr>
    <tr>
      <th>Renewable energy (kWh)</th>
      <td>22179.611</td>
      <td>41880.569</td>
      <td>69248.362</td>
    </tr>
    <tr>
      <th>Storage energy (kWh)</th>
      <td>19067.076</td>
      <td>34183.638</td>
      <td>51891.289</td>
    </tr>
    <tr>
      <th>Grid energy (kWh)</th>
      <td>12716.766</td>
      <td>23097.270</td>
      <td>36509.891</td>
    </tr>
    <tr>
      <th>Diesel energy (kWh)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Discounted energy (kWh)</th>
      <td>44290.408</td>
      <td>55468.771</td>
      <td>60608.211</td>
    </tr>
    <tr>
      <th>Kerosene displacement</th>
      <td>0.954</td>
      <td>0.965</td>
      <td>0.960</td>
    </tr>
    <tr>
      <th>Diesel fuel usage (l)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Total cost ($)</th>
      <td>29618.740</td>
      <td>17046.600</td>
      <td>11396.690</td>
    </tr>
    <tr>
      <th>Total system cost ($)</th>
      <td>28863.620</td>
      <td>16653.510</td>
      <td>11091.050</td>
    </tr>
    <tr>
      <th>New equipment cost ($)</th>
      <td>25200.000</td>
      <td>13308.900</td>
      <td>8218.550</td>
    </tr>
    <tr>
      <th>New connection cost ($)</th>
      <td>400.000</td>
      <td>262.440</td>
      <td>172.190</td>
    </tr>
    <tr>
      <th>O&amp;M cost ($)</th>
      <td>3159.960</td>
      <td>2953.460</td>
      <td>2560.360</td>
    </tr>
    <tr>
      <th>Diesel cost ($)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Grid cost ($)</th>
      <td>103.660</td>
      <td>128.720</td>
      <td>139.960</td>
    </tr>
    <tr>
      <th>Kerosene cost ($)</th>
      <td>755.130</td>
      <td>393.090</td>
      <td>305.640</td>
    </tr>
    <tr>
      <th>Kerosene cost mitigated ($)</th>
      <td>17295.780</td>
      <td>11875.070</td>
      <td>7921.960</td>
    </tr>
    <tr>
      <th>Total GHGs (kgCO2eq)</th>
      <td>55702.070</td>
      <td>55117.980</td>
      <td>58715.820</td>
    </tr>
    <tr>
      <th>Total system GHGs (kgCO2eq)</th>
      <td>48801.380</td>
      <td>49871.530</td>
      <td>52811.240</td>
    </tr>
    <tr>
      <th>New equipment GHGs (kgCO2eq)</th>
      <td>37350.000</td>
      <td>31617.150</td>
      <td>27556.470</td>
    </tr>
    <tr>
      <th>New connection GHGs (kgCO2eq)</th>
      <td>40.000</td>
      <td>40.000</td>
      <td>40.000</td>
    </tr>
    <tr>
      <th>O&amp;M GHGs (kgCO2eq)</th>
      <td>1800.000</td>
      <td>2600.000</td>
      <td>3400.000</td>
    </tr>
    <tr>
      <th>Diesel GHGs (kgCO2eq)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Grid GHGs (kgCO2eq)</th>
      <td>9611.380</td>
      <td>15614.390</td>
      <td>21814.770</td>
    </tr>
    <tr>
      <th>Kerosene GHGs (kgCO2eq)</th>
      <td>6900.680</td>
      <td>5246.450</td>
      <td>5904.580</td>
    </tr>
    <tr>
      <th>Kerosene GHGs mitigated (kgCO2eq)</th>
      <td>142468.860</td>
      <td>143334.180</td>
      <td>139938.040</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Note that here we have displayed the outputs vertically (rather than
horizontally as in the default) so that they are easier to see. These
results are automatically generated as a result of the optimisation
process but it is also possible to calculate them for a specific case
study system, described later when we return to system performance.</p>
<p>Many of these variables have similar names, so here are some pointers on
interpreting them:</p>
<ul class="simple">
<li><p><em>Cumulative</em> means that the variable is a running total since the
start of the system lifetime (i.e. the current period and all
previous periods)</p></li>
<li><p><em>New</em> means the variable includes only the current period</p></li>
<li><p><em>Cost</em> values are all discounted costs, meaning they take into account the discount rate, and are presented in terms of $ at the start of the lifetime</p></li>
<li><p><em>System</em> means the electricity system (PV and storage capacity, O&amp;M,
diesel, grid, connections)</p></li>
<li><p><em>Total</em> refers to the costs from all sources (i.e. the <em>system</em> and
kerosene expenditure) a each time period</p></li>
<li><p><em>Energy</em> is either the amount of energy or (when specified) the
discounted energy which takes into account the discount rate</p></li>
</ul>
<p>These identifiers (or the names themselves) should provide enough
description to work out what each variable means. Now let’s consider a
few of the most relevant ones that you’re most likely to use in more
detail:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Variable</p></th>
<th class="head"><p>Explanation</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">/</span> <span class="pre">End</span> <span class="pre">year</span></code></p></td>
<td><p>The first and last years in each
considered period</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Initial</span> <span class="pre">PV</span> <span class="pre">/</span> <span class="pre">storage</span> <span class="pre">size</span></code></p></td>
<td><p>Installed capacity of PV/storage
at the start of the period</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Final</span> <span class="pre">PV</span> <span class="pre">/</span> <span class="pre">storage</span> <span class="pre">size</span></code></p></td>
<td><p>Equivalent capacity of PV/storage
at the end of the period, after
degradation</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">capacity</span></code></p></td>
<td><p>Installed capacity of diesel
generator required for backup
(kW)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">LCUE</span> <span class="pre">($/kWh)</span></code></p></td>
<td><p>Levelised cost of used
electricity up to the end of the
simulation period ($/kWh)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Emissions</span> <span class="pre">intensity</span> <span class="pre">(gCO2/kWh)</span></code></p></td>
<td><p>Emissions intensity up to the end
of the simulation period
(gCO2/kWh)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Blackouts</span></code></p></td>
<td><p>Proportion of time where
blackouts occurred for each
iteration period</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Unmet</span> <span class="pre">energy</span> <span class="pre">fraction</span></code></p></td>
<td><p>Proportion unmet energy for each
iteration period</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Renewables</span> <span class="pre">fraction</span></code></p></td>
<td><p>Proportion energy from PV and
storage for each iteration period</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Kerosene</span> <span class="pre">displacement</span></code></p></td>
<td><p>Proportion kerosene mitigated
during each iteration period</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">cost</span> <span class="pre">($)</span></code></p></td>
<td><p>Running total of cumulative costs
over the system lifetime in $</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">GHGs</span> <span class="pre">(kgCO2eq)</span></code></p></td>
<td><p>Running total of cumulative GHGs
over the system lifetime in
kgCO2eq</p></td>
</tr>
</tbody>
</table>
<p>The first variables are useful in characterising the iteration period
(<code class="docutils literal notranslate"><span class="pre">Start</span> <span class="pre">year</span></code> and <code class="docutils literal notranslate"><span class="pre">End</span> <span class="pre">year</span></code>) and knowing the capacity of the system
that was installed (<code class="docutils literal notranslate"><span class="pre">Initial</span> <span class="pre">PV</span> <span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">Initial</span> <span class="pre">storage</span> <span class="pre">size</span></code>),
possibly the most important variables in terms of describing the system
itself. The <code class="docutils literal notranslate"><span class="pre">Final</span> <span class="pre">PV</span> <span class="pre">size</span></code> and <code class="docutils literal notranslate"><span class="pre">Final</span> <span class="pre">storage</span> <span class="pre">size</span></code> describe the
state of the equipment at the end of the iteration period, incorporating
the effects of degradation. Note that for the next iteration period,
CLOVER may choose to “refresh” the installed capacity either by
returning it to the same initial size from the previous iteration or
increasing it, or leave it “as is” and not add any further capacity. In
the latter case the final size from the previous iteration would be the
initial size of the next; this is relatively common for systems without
growing load profiles. Finally <code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">capacity</span></code> describes the size of
the diesel generator installed to provide power as a backup.</p>
<p>The remaining variables in the table are useful to use as either
threshold or optimisation criteria for designing your system: many of
the variables in <code class="docutils literal notranslate"><span class="pre">example_optimisation</span></code> could be used for this
purpose, but these are the most commonly used and most likely to be
relevant for your investigation. Bear in mind that <strong>the input for</strong>
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span></code> <strong>or</strong> <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">criterion</span></code> <strong>must match the
variable name exactly</strong> otherwise the function will fail. For example,
<code class="docutils literal notranslate"><span class="pre">LCUE</span> <span class="pre">($/kWh)</span></code> would work but <code class="docutils literal notranslate"><span class="pre">LCUE</span></code> would not.</p>
<p>Two important variables relate to the financial and environmental impact
of the system at each point in its lifetime: the levelised cost of used
electricity (LCUE, $/kWh) and emissions intensity (gCO2/kWh). These are
convenient metrics of capturing the performance of the system per unit
of electricity and so are readily comparable to other systems for the
same (or other) applications. The LCUE is the most common optimisation
criterion as it conveniently captures core financial information which
is readily comparable to other situations. LCUE considers only the
energy <em>used</em> by the community, explicitly defined as the useful
electricity actually consumed rather than (for example) all of the
electricity that was generated, some of which was likely dumped if
demand was already met. Furthermore this definition accounts for
blackout periods when electricity was demanded, but unmet.</p>
<p>For each iteration step these variables provide information about the
LCUE and emissions intensity by the end of that step: for example, the
LCUE over the first time period is <code class="docutils literal notranslate"><span class="pre">$0.65/kWh</span></code> but falls to
<code class="docutils literal notranslate"><span class="pre">$0.35/kWh</span></code> by the end of the optimisation period over the whole
lifetime. This is because the impacts of deploying the equipment occur
at the start of each period but their benefits, in terms of the
electricity they provide, are received over the total remaining lifetime
of the system including subsequent iteration periods. The assumption
here is that a community energy project would need to purchase equipment
outright before it can be deployed, reflecting common practice, but
would not capture more nuanced financial plans which would require
further development outside of CLOVER.</p>
<p>The next set of variables describe the performance of the system during
each iteration period. These can be used as optimisation criteria but
are also very useful as threshold criteria and each period is considered
independently to ensure the minimum performance threshold is met
throughout. If this were not the case, if the first period performed
very well then the second could perform below the expectation of the
threshold, if the average over the entire period still satisfied the
defined threshold value. As before <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> and
<code class="docutils literal notranslate"><span class="pre">Unmet</span> <span class="pre">energy</span> <span class="pre">fraction</span></code> describe the service unavailability in terms
of the proportion of time electricity is not available and the
proportion of energy demand that is not satisfied by the system, and
when used as a threshold criterion are defined as the maximum allowable
value for a system to be sufficient. <code class="docutils literal notranslate"><span class="pre">Renewables</span> <span class="pre">fraction</span></code> describes
the proportion of energy that was supplied by either solar or storage
(i.e. not from the grid or diesel generation), whilst
<code class="docutils literal notranslate"><span class="pre">Kerosene</span> <span class="pre">displacement</span></code> describes the proportion of kerosene usage
that was mitigated by the availability of electricity. For the latter
two variables, these are considered a minimum allowable value when used
as a threshold criterion.</p>
<p>Finally, <code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">cost</span> <span class="pre">($)</span></code> and <code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">GHGs</span> <span class="pre">(kgCO2eq)</span></code> are
running totals of the cumulative incurred costs or GHGs up to the point
of each iteration period. These are the best values for capturing the
entire impact of the scenario over its lifetime, including impacts from
all sources including kerosene usage. For the impacts of the electricity
system alone, <code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">system</span> <span class="pre">cost</span> <span class="pre">($)</span></code> and
<code class="docutils literal notranslate"><span class="pre">Cumulative</span> <span class="pre">system</span> <span class="pre">GHGs</span> <span class="pre">(kgCO2eq)</span></code> can instead be used (if kerosene
usage was not already disregarded earlier). In this case, the total
lifetime impact of the system (and residual kerosene usage) was that it
cost around $58,000 and emitted around 170 tCO2 to supply power to the
community of 100 households for 12 years.</p>
<p><strong>You now should have everything you need to investigate your scenarios,
perform optimisations and design electricity systems. Good luck!</strong></p>
</section>
</section>
<section id="troubleshooting">
<h2>Troubleshooting<a class="headerlink" href="#troubleshooting" title="Permalink to this headline"></a></h2>
<p>Most of the <em>Optimisation</em> functionality is contained within the
<code class="docutils literal notranslate"><span class="pre">Optimisation().multiple_optimisation_step()</span></code> function and so
potential issues are most likely to come either from how the module
gathers data from other parts of CLOVER or from the input CSV files.</p>
<ul class="simple">
<li><p>Ensure that the <code class="docutils literal notranslate"><span class="pre">self.location</span></code> variable is correct in all of the
modules that <code class="docutils literal notranslate"><span class="pre">Optimisation</span></code> imports</p></li>
<li><p>Check that your <code class="docutils literal notranslate"><span class="pre">Finance</span> <span class="pre">inputs</span></code>, <code class="docutils literal notranslate"><span class="pre">GHG</span> <span class="pre">inputs</span></code> and
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code>, CSVs are completed with the scenario you
want to investigate, and any changes are saved in the CSV file before
running another simulation</p></li>
<li><p>Check that your <code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">inputs</span></code> CSV is completed with the
scenario you want to investigate and the <em>Energy_System</em> module is
working correctly</p></li>
<li><p>Ensure that you use the correct filename when saving and opening
previous simulations</p></li>
<li><p>When running optimisations, remember to save the output of
<code class="docutils literal notranslate"><span class="pre">Optimisation().multiple_optimisation_step()</span></code> as a variable</p></li>
</ul>
</section>
<section id="extension-and-visualisation">
<h2>Extension and visualisation<a class="headerlink" href="#extension-and-visualisation" title="Permalink to this headline"></a></h2>
<section id="changing-parameter-optimisation">
<h3>Changing parameter optimisation<a class="headerlink" href="#changing-parameter-optimisation" title="Permalink to this headline"></a></h3>
<p>Investigating the design of a system under a given threshold criterion
allows us to identify the optimum configuration under those conditions,
but in many cases the target value of the threshold criterion might be
negotiable. A common example is the tradeoff between the reliability of
the system and the cost of electricity: with all other scenario
conditions being the same, a more reliable system will need greater
generation and storage capacities which will increase the investment
required and so increase the cost of electricity. It is often
interesting, therefore, to investigate a range of values for the
threshold criterion to see what effect it has on the resulting
optimisation criterion, and from those options select a system that best
suits our needs.</p>
<p>We can demonstrate the above example by considering a system with the
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">criterion</span></code> as <code class="docutils literal notranslate"><span class="pre">LCUE</span> <span class="pre">($/kWh)</span></code> and the
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">criterion</span></code> as <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> as before, but with a range of
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span></code>. Whereas before we set this to be <code class="docutils literal notranslate"><span class="pre">0.05</span></code>, we now
want to optimise using several options ranging from <code class="docutils literal notranslate"><span class="pre">0.25</span></code> to <code class="docutils literal notranslate"><span class="pre">0.05</span></code>
in steps of <code class="docutils literal notranslate"><span class="pre">0.05</span></code>. All of the other inputs in the
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV file are the same as the earlier
example but we have set <code class="docutils literal notranslate"><span class="pre">Diesel</span> <span class="pre">backup</span> <span class="pre">=</span> <span class="pre">N</span></code>
in the <code class="docutils literal notranslate"><span class="pre">Scenario</span> <span class="pre">inputs</span></code> CSV file to avoid the diesel generator
backup improving the reliability, in order to better demonstrate our
goal here.</p>
<p>We can use the below function to automatically perform several
optimisations in a row and save the results to CSV files:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Optimisation</span><span class="p">()</span><span class="o">.</span><span class="n">changing_parameter_optimisation</span><span class="p">(</span><span class="n">parameter</span> <span class="o">=</span> <span class="s1">&#39;Threshold value&#39;</span><span class="p">,</span>
    <span class="n">parameter_values</span> <span class="o">=</span> <span class="p">[</span><span class="mf">0.25</span><span class="p">,</span><span class="mf">0.20</span><span class="p">,</span><span class="mf">0.15</span><span class="p">,</span><span class="mf">0.10</span><span class="p">,</span><span class="mf">0.05</span><span class="p">],</span>
    <span class="n">results_folder_name</span> <span class="o">=</span> <span class="s1">&#39;Changing parameter example&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This function takes more variables than the usual
<code class="docutils literal notranslate"><span class="pre">Optimisation().multiple_optimisation_step()</span></code> function as it
repeatedly uses that function, with changing parameters, to perform
several optimisations. Be aware that, by doing this, the
<code class="docutils literal notranslate"><span class="pre">Optimisation().changing_parameter_optimisation(...)</span></code> function takes
several times longer to finish and, when investigating systems with the
strictest threshold values, can take much more time than previous
optimisations you might have performed.</p>
<p>We define which parameter we want to change each time using the
<code class="docutils literal notranslate"><span class="pre">parameter</span></code> input, which can correspond to any variable in the
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV file. Here we want to investigate the effect
of using different values for the threshold criterion, so we set
<code class="docutils literal notranslate"><span class="pre">parameter</span> <span class="pre">=</span> <span class="pre">'Threshold</span> <span class="pre">value'</span></code>. Next we need to specify the values we
want to investigate which we input as a <code class="docutils literal notranslate"><span class="pre">list</span></code>-type variable; using
the information above, we therefore input
<code class="docutils literal notranslate"><span class="pre">parameter_values</span> <span class="pre">=</span> <span class="pre">[0.25,0.20,0.15,0.10,0.05]</span></code>. The list of
<code class="docutils literal notranslate"><span class="pre">parameter_values</span></code> can be as long or short as desired. This will run
the optimisation function sequentially for each value
(<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.25</span></code>, <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.20</span></code>, …,
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.05</span></code>) by automatically rewriting the
<code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV file: be aware that the final rewrite will
leave the final <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span></code> in the file, so you may need to
remember to amend this if you use the usual
<code class="docutils literal notranslate"><span class="pre">Optimisation().multiple_optimisation_step()</span></code> again.</p>
<p>Finally, the results of each optimisation are saved in a folder with the
name <code class="docutils literal notranslate"><span class="pre">results_folder_name</span></code> in the <em>Saved optimisations</em> folder in your
<em>Optimisation</em> folder, which itself is in the overall file structure for
your location. Here we use
<code class="docutils literal notranslate"><span class="pre">results_folder_name</span> <span class="pre">=</span> <span class="pre">'Changing</span> <span class="pre">parameter</span> <span class="pre">example'</span></code> to specify the
place where the outputs should be saved. The folder must be manually
created beforehand in order to save the files there, otherwise they will
be saved in a new folder with the date and time the function was
performed.</p>
<p>Whilst running, the function will save the outputs of each optimisation
as a CSV with the name <code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.25.csv</span></code> (and so on) to
allow you to investigate each system individually afterwards. Once the
entire function is complete, it outputs a summary file of the final
results for each optimised system in the file
<code class="docutils literal notranslate"><span class="pre">Threshold</span> <span class="pre">value</span> <span class="pre">lifetime</span> <span class="pre">summary</span> <span class="pre">of</span> <span class="pre">results.csv</span></code> (the name of this
file will change if you used a different <code class="docutils literal notranslate"><span class="pre">parameter</span></code>). This is
composed of the final row of each optimisation so bear in mind that some
of the data refers to a single iteration period when interpreting the
results and refer to the section on optimisation results for guidance. If you
need to cancel the function for any reason, the output CSVs that have
already been saved will still be available but this final CSV will not,
as it is compiled at the end of the process (but can be manually
compiled if necessary).</p>
<p>Using <code class="docutils literal notranslate"><span class="pre">parameter</span> <span class="pre">=</span> <span class="pre">'Threshold</span> <span class="pre">value'</span></code> is the most common usage of this
function to set the process running self-sufficiently, allowing you to
leave it to work away in the background without intervention and return
results when they are ready. It is also possible to use it for other
types of investigations, but be sure to think carefully how these would
be interpreted by the function. For example, if you wanted to
investigate the effect on the system of either using a threshold value
of <code class="docutils literal notranslate"><span class="pre">0.05</span></code> for either the <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> or <code class="docutils literal notranslate"><span class="pre">Unmet</span> <span class="pre">energy</span> <span class="pre">fraction</span></code>,
you could use <code class="docutils literal notranslate"><span class="pre">parameter</span> <span class="pre">=</span> <span class="pre">'Threshold</span> <span class="pre">criterion'</span></code> and
<code class="docutils literal notranslate"><span class="pre">parameter_values</span> <span class="pre">=</span> <span class="pre">['Blackouts',</span> <span class="pre">'Unmet</span> <span class="pre">energy</span> <span class="pre">fraction']</span></code>. Or if you
wanted to find an optimum systems with the lowest cost of electricity or
lowest emissions intensity, you could use
<code class="docutils literal notranslate"><span class="pre">parameter</span> <span class="pre">=</span> <span class="pre">'Optimisation</span> <span class="pre">criterion'</span></code> and
<code class="docutils literal notranslate"><span class="pre">parameter_values</span> <span class="pre">=</span> <span class="pre">['LCUE</span> <span class="pre">($/kWh)',</span> <span class="pre">'Emissions</span> <span class="pre">intensity</span> <span class="pre">(gCO2/kWh)']</span></code>.
Owing to the variety of potential combinations they have not all been
tested so unexpected bugs may occur, in which case please get in touch.</p>
</section>
<section id="interpreting-optimisation-results">
<h3>Interpreting optimisation results<a class="headerlink" href="#interpreting-optimisation-results" title="Permalink to this headline"></a></h3>
<p>The meaning and implications of your optimisation results will depend
very strongly on your scenario and the goals of your investigation:
CLOVER can provide results but the value is in interpreting them and
applying them in the context of your project. With that in mind, we can
use the example in the changing parameter optimisation section to
demonstrate some of the techniques that could be useful.</p>
<p>As stated earlier, the goal of this investigation was to see what effect
different levels of reliability (from <code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.25</span></code> to
<code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.05</span></code>) would have on the optimum system design, defined
to be the one with the lowest LCUE. Let’s open the results we generated
previously:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>optimisation_example = Optimisation().open_optimisation(filename = &#39;/Changing parameter example/Threshold value lifetime summary of results&#39;)
optimisation_example.T.head(len(optimisation_example.T)).round(3)
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>0</th>
      <th>1</th>
      <th>2</th>
      <th>3</th>
      <th>4</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Parameter value</th>
      <td>0.250</td>
      <td>0.200</td>
      <td>0.150</td>
      <td>0.100</td>
      <td>0.050</td>
    </tr>
    <tr>
      <th>Start year</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>End year</th>
      <td>12.000</td>
      <td>12.000</td>
      <td>12.000</td>
      <td>12.000</td>
      <td>12.000</td>
    </tr>
    <tr>
      <th>Step length</th>
      <td>4.000</td>
      <td>4.000</td>
      <td>4.000</td>
      <td>4.000</td>
      <td>4.000</td>
    </tr>
    <tr>
      <th>Optimisation length</th>
      <td>12.000</td>
      <td>12.000</td>
      <td>12.000</td>
      <td>12.000</td>
      <td>12.000</td>
    </tr>
    <tr>
      <th>Maximum PV size</th>
      <td>20.000</td>
      <td>20.000</td>
      <td>25.000</td>
      <td>25.000</td>
      <td>30.000</td>
    </tr>
    <tr>
      <th>Maximum storage size</th>
      <td>55.000</td>
      <td>65.000</td>
      <td>70.000</td>
      <td>85.000</td>
      <td>100.000</td>
    </tr>
    <tr>
      <th>Maximum diesel capacity</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>LCUE ($/kWh)</th>
      <td>0.268</td>
      <td>0.282</td>
      <td>0.301</td>
      <td>0.320</td>
      <td>0.353</td>
    </tr>
    <tr>
      <th>Emissions intensity (gCO2/kWh)</th>
      <td>444.411</td>
      <td>437.315</td>
      <td>460.682</td>
      <td>452.121</td>
      <td>487.441</td>
    </tr>
    <tr>
      <th>Blackouts</th>
      <td>0.226</td>
      <td>0.177</td>
      <td>0.127</td>
      <td>0.085</td>
      <td>0.044</td>
    </tr>
    <tr>
      <th>Unmet fraction</th>
      <td>0.161</td>
      <td>0.123</td>
      <td>0.089</td>
      <td>0.059</td>
      <td>0.029</td>
    </tr>
    <tr>
      <th>Renewables fraction</th>
      <td>0.471</td>
      <td>0.460</td>
      <td>0.449</td>
      <td>0.434</td>
      <td>0.429</td>
    </tr>
    <tr>
      <th>Storage fraction</th>
      <td>0.248</td>
      <td>0.275</td>
      <td>0.299</td>
      <td>0.323</td>
      <td>0.338</td>
    </tr>
    <tr>
      <th>Diesel fraction</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Grid fraction</th>
      <td>0.281</td>
      <td>0.265</td>
      <td>0.252</td>
      <td>0.244</td>
      <td>0.233</td>
    </tr>
    <tr>
      <th>Total energy (kWh)</th>
      <td>266649.494</td>
      <td>279106.252</td>
      <td>290770.084</td>
      <td>300815.451</td>
      <td>310774.471</td>
    </tr>
    <tr>
      <th>Total load energy (kWh)</th>
      <td>314578.751</td>
      <td>314578.751</td>
      <td>314578.751</td>
      <td>314578.751</td>
      <td>314578.751</td>
    </tr>
    <tr>
      <th>Unmet energy (kWh)</th>
      <td>50503.688</td>
      <td>38815.038</td>
      <td>27883.654</td>
      <td>18448.425</td>
      <td>8970.096</td>
    </tr>
    <tr>
      <th>Renewable energy (kWh)</th>
      <td>125602.499</td>
      <td>128275.629</td>
      <td>130486.554</td>
      <td>130486.554</td>
      <td>133308.542</td>
    </tr>
    <tr>
      <th>Storage energy (kWh)</th>
      <td>66216.550</td>
      <td>76869.370</td>
      <td>87028.926</td>
      <td>97074.293</td>
      <td>105142.003</td>
    </tr>
    <tr>
      <th>Grid energy (kWh)</th>
      <td>74830.445</td>
      <td>73961.253</td>
      <td>73254.605</td>
      <td>73254.605</td>
      <td>72323.927</td>
    </tr>
    <tr>
      <th>Diesel energy (kWh)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Discounted energy (kWh)</th>
      <td>138250.028</td>
      <td>144964.140</td>
      <td>150964.432</td>
      <td>155792.252</td>
      <td>160367.390</td>
    </tr>
    <tr>
      <th>Total cost ($)</th>
      <td>49206.500</td>
      <td>48696.650</td>
      <td>50056.010</td>
      <td>52631.400</td>
      <td>58062.030</td>
    </tr>
    <tr>
      <th>Total system cost ($)</th>
      <td>37102.430</td>
      <td>40824.860</td>
      <td>45366.490</td>
      <td>49799.110</td>
      <td>56608.180</td>
    </tr>
    <tr>
      <th>New equipment cost ($)</th>
      <td>29446.250</td>
      <td>32795.160</td>
      <td>36829.580</td>
      <td>40635.940</td>
      <td>46727.450</td>
    </tr>
    <tr>
      <th>New connection cost ($)</th>
      <td>834.630</td>
      <td>834.630</td>
      <td>834.630</td>
      <td>834.630</td>
      <td>834.630</td>
    </tr>
    <tr>
      <th>O&amp;M cost ($)</th>
      <td>6437.500</td>
      <td>6815.780</td>
      <td>7325.660</td>
      <td>7951.920</td>
      <td>8673.780</td>
    </tr>
    <tr>
      <th>Diesel cost ($)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Grid cost ($)</th>
      <td>384.060</td>
      <td>379.300</td>
      <td>376.630</td>
      <td>376.630</td>
      <td>372.340</td>
    </tr>
    <tr>
      <th>Kerosene cost ($)</th>
      <td>12104.060</td>
      <td>7871.810</td>
      <td>4689.520</td>
      <td>2832.290</td>
      <td>1453.860</td>
    </tr>
    <tr>
      <th>Kerosene cost mitigated ($)</th>
      <td>26442.590</td>
      <td>30674.860</td>
      <td>33857.150</td>
      <td>35714.370</td>
      <td>37092.810</td>
    </tr>
    <tr>
      <th>Kerosene displacement</th>
      <td>0.678</td>
      <td>0.782</td>
      <td>0.865</td>
      <td>0.918</td>
      <td>0.960</td>
    </tr>
    <tr>
      <th>Diesel fuel usage (l)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Total GHGs (kgCO2eq)</th>
      <td>261382.140</td>
      <td>218776.770</td>
      <td>193499.040</td>
      <td>172452.620</td>
      <td>169535.870</td>
    </tr>
    <tr>
      <th>Total system GHGs (kgCO2eq)</th>
      <td>118501.880</td>
      <td>122057.280</td>
      <td>133952.620</td>
      <td>136005.050</td>
      <td>151484.150</td>
    </tr>
    <tr>
      <th>O&amp;M GHGs (kgCO2eq)</th>
      <td>5500.000</td>
      <td>5900.000</td>
      <td>6400.000</td>
      <td>7000.000</td>
      <td>7800.000</td>
    </tr>
    <tr>
      <th>Diesel GHGs (kgCO2eq)</th>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.000</td>
    </tr>
    <tr>
      <th>Grid GHGs (kgCO2eq)</th>
      <td>48633.790</td>
      <td>48049.120</td>
      <td>47629.300</td>
      <td>47629.300</td>
      <td>47040.540</td>
    </tr>
    <tr>
      <th>Kerosene GHGs (kgCO2eq)</th>
      <td>142880.270</td>
      <td>96719.480</td>
      <td>59546.420</td>
      <td>36447.560</td>
      <td>18051.710</td>
    </tr>
    <tr>
      <th>Kerosene GHGs mitigated (kgCO2eq)</th>
      <td>300912.540</td>
      <td>347073.330</td>
      <td>384246.390</td>
      <td>407345.240</td>
      <td>425741.080</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Once again we have displayed the outputs vertically to make them easier
to see. The results in this table are characterised from left to right
in terms of the <code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">value</span></code>, here our range from 25% to 5%
blackouts. An important note here is that <em>Total</em> now refers to the
lifetime cumulative cost, rather than the final iteration as it was
before. The fraction of energy from each source considers only the
energy used in the system (i.e. after the <code class="docutils literal notranslate"><span class="pre">Unmet</span> <span class="pre">fraction</span></code> has been
taken out), and <code class="docutils literal notranslate"><span class="pre">Renewables</span> <span class="pre">fraction</span></code> refers to energy from renewable
generation used directly, with <code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">fraction</span></code> accounted for
separately. The differences in naming conventions come from different
versions of the model which have been updated and modified over time, so
bear this in mind and refer to the documentation when interpreting the
outputs.</p>
<p>Let’s look at how the different <code class="docutils literal notranslate"><span class="pre">parameter_values</span></code> we used in the
function impact the LCUE graphically:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>import numpy as np
import matplotlib.pyplot as plt
import matplotlib as mpl

plt.bar(range(5),optimisation_example[&#39;LCUE ($/kWh)&#39;],tick_label=optimisation_example[&#39;Parameter value&#39;])
plt.xlabel(&#39;Blackout threshold value&#39;)
plt.ylabel(&#39;LCUE ($/kWh)&#39;)
plt.show()
</pre></div>
</div>
<img alt="_images/output_17_0_opt.png" src="_images/output_17_0_opt.png" />
<p>As expected the value of LCUE, our chosen optimisation criterion,
increases for more reliable systems: if the community are willing to pay
more for electricity then the most reliable system may be appropriate,
but if not then perhaps a less reliable but more affordable system would
be better. It is worth noting here that whilst we set <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> to
be the threshold criterion, the actual levels of blackouts in each
system was always lower:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>blackouts = optimisation_example[[&#39;Parameter value&#39;,&#39;Blackouts&#39;]]
blackouts.head().round(3)
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Parameter value</th>
      <th>Blackouts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.25</td>
      <td>0.226</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.20</td>
      <td>0.177</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.15</td>
      <td>0.127</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.10</td>
      <td>0.085</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.05</td>
      <td>0.044</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>This is because the actual value of <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> must always be equal
to or lower than the threshold value, but this is worth noting when
considering the difference between the criteria we set for a system and
its actual performance.</p>
<p>After seeing these results it is also good to evaluate the resolution of
the optimisations that we used. Our <code class="docutils literal notranslate"><span class="pre">Optimisation</span> <span class="pre">inputs</span></code> CSV used
<code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span></code> as 5 kWp: given that the installed capacities (here
shown in the <code class="docutils literal notranslate"><span class="pre">Maximum</span> <span class="pre">PV</span> <span class="pre">size</span></code> variable) are in the range 20-30 kWp,
this step size is likely too large to give us a good resolution and the
should probably have been smaller to avoid unnecessary oversizing. The
<code class="docutils literal notranslate"><span class="pre">Storage</span> <span class="pre">size</span> <span class="pre">(step)</span></code> value of 5 kWh was probably a good choice,
however, as the storage sizes are all much larger than the step size. If
we were looking into more detail into a given optimisation, or a new set
of optimisations, it would be worthwhile re-running the function with a
smaller <code class="docutils literal notranslate"><span class="pre">PV</span> <span class="pre">size</span> <span class="pre">(step)</span></code> variable. This would also likely find systems
with the value for <code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> closer to the <code class="docutils literal notranslate"><span class="pre">parameter_value</span></code>. If
we were designing a system for implementation, it may also be a good
idea to run a final optimisation using a smaller step size for both
variables, possibly using the actual capacities of the PV panels and
batteries that might be used, to get the most precise answer available.</p>
</section>
<section id="incorporating-further-constraints">
<h3>Incorporating further constraints<a class="headerlink" href="#incorporating-further-constraints" title="Permalink to this headline"></a></h3>
<p>Perhaps in addition to wanting to supply electricity at the lowest LCUE,
a project developer also has a maximum budget for the lifetime of the
project (say $50,000). This could either be a funding constraint or a
comparison to some other kind of system, for example using diesel only
(rather than solar, storage and the grid as considered here). This time
let’s plot the results in terms of the lifetime cost of the system
against the availability of electricity, both in terms of time
(<code class="docutils literal notranslate"><span class="pre">Blackouts</span></code>) and also show the availability of energy demanded (using
<code class="docutils literal notranslate"><span class="pre">Unmet</span> <span class="pre">fraction</span></code>) for some additional insight:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>plt.plot(optimisation_example[&#39;Total system cost ($)&#39;]/1000,
         (1-optimisation_example[&#39;Blackouts&#39;])*100,
        linewidth=3, label = &#39;Time&#39;)
plt.plot(optimisation_example[&#39;Total system cost ($)&#39;]/1000,
         (1-optimisation_example[&#39;Unmet fraction&#39;])*100,
        linewidth=3, label = &#39;Energy&#39;)
plt.plot([50,50],[75,100], color = &#39;k&#39;, linestyle = &#39;:&#39;)
plt.ylabel(&#39;Availability (%)&#39;)
plt.ylim(75,100)
plt.xlabel(&#39;Lifetime cost ($ 000s)&#39;)
plt.xlim(35,60)
plt.grid(which=&#39;both&#39;)
plt.legend()
plt.show()
</pre></div>
</div>
<img alt="_images/output_21_0_opt.png" src="_images/output_21_0_opt.png" />
<p>In all cases the availability of energy is greater than the availability
in terms of time, suggesting that when blackouts occur they are either
at times with lower demand or power is available for at least some of
those hours when blackouts occur. It also suggests that using
<code class="docutils literal notranslate"><span class="pre">Blackouts</span></code> as the threshold criterion is more strict and will result
in a more conservative estimate of reliability.</p>
<p>Here we can see that the maximum budget of $50,000 would correspond to a
system with around power available around 92% of the time, and would
supply 94% of the energy demanded by the community. This is just an
estimate, however, and further optimisations around this point would
inform the actual system design and capacities necessary to achieve that
performance. Conveniently for us, however, the system found for
<code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.10</span></code> matches these performances quite closely
which hints at the next steps for future optimisations: for example,
using <code class="docutils literal notranslate"><span class="pre">parameter_values</span> <span class="pre">=</span> <span class="pre">[0.12,</span> <span class="pre">0.11,</span> <span class="pre">0.10,</span> <span class="pre">0.09,</span> <span class="pre">0.08]</span></code> to hone in
on the best system.</p>
</section>
<section id="considering-environmental-performance">
<h3>Considering environmental performance<a class="headerlink" href="#considering-environmental-performance" title="Permalink to this headline"></a></h3>
<p>In this case the we designed the systems to meet a minimum level of
system performance (<code class="docutils literal notranslate"><span class="pre">Blackouts</span></code>) at the lowest LCUE, and also added a
constraint of the total available budget of the project. Many developers
also want to know the environmental impact of the projects, both in
terms of the emissions intensity of the power provided and the total GHG
emissions.</p>
<p>Let’s first look at the emissions intensity:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>emissions_intensity = optimisation_example[[&#39;Parameter value&#39;,&#39;Emissions intensity (gCO2/kWh)&#39;]]
emissions_intensity.head().round(3)
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Parameter value</th>
      <th>Emissions intensity (gCO2/kWh)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.25</td>
      <td>444.411</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.20</td>
      <td>437.315</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.15</td>
      <td>460.682</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.10</td>
      <td>452.121</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.05</td>
      <td>487.441</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>It seems that there is not an obvious linearity here, but there are
several factors at play. The systems use approximately the same amount
of high-carbon grid electricity, but the higher-reliability systems have
a greater share of energy coming from renewable sources which will
decrease the average emissions intensity. At higher reliabilities,
however, there is a diminishing return on investment for the equipment
as more equipment (and hence more embedded emissions) are necessary for
the same incremental gains. Let’s compare to the emissions intensity of
the grid:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>print(GHG_inputs.loc[18:19])
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>                      <span class="mi">0</span>    <span class="mi">1</span>          <span class="mi">2</span>
<span class="mi">18</span>  <span class="n">Grid</span> <span class="n">GHGs</span> <span class="p">(</span><span class="n">initial</span><span class="p">)</span>  <span class="mf">0.8</span>  <span class="n">kgCO2</span><span class="o">/</span><span class="n">kWh</span>
<span class="mi">19</span>    <span class="n">Grid</span> <span class="n">GHGs</span> <span class="p">(</span><span class="n">final</span><span class="p">)</span>  <span class="mf">0.4</span>  <span class="n">kgCO2</span><span class="o">/</span><span class="n">kWh</span>
</pre></div>
</div>
<p>Over the lifetime of the system the average intensity of the grid is
around 600 gCO2/kWh, but for all of our systems it is between 430-490
gCO2/kWh, so overall these systems perform quite favourably - especially
bearing in mind that some of the 23-28% of their energy comes from the
grid (<code class="docutils literal notranslate"><span class="pre">Grid</span> <span class="pre">fraction</span></code>). Diesel-only systems can have emissions
intensities around 1000 gCO2/kWh, so these systems seem like a good
option. Let’s also consider the total GHG emissions from each source:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>plt.bar(range(5),optimisation_example[&#39;Total system GHGs (kgCO2eq)&#39;],
       edgecolor=&#39;k&#39;,label=&#39;System&#39;)
plt.bar(range(5),optimisation_example[&#39;Kerosene GHGs (kgCO2eq)&#39;],
        bottom = optimisation_example[&#39;Total system GHGs (kgCO2eq)&#39;],
       edgecolor=&#39;k&#39;,label=&#39;Kerosene&#39;)
plt.bar(range(5),optimisation_example[&#39;Kerosene GHGs mitigated (kgCO2eq)&#39;],
        bottom = optimisation_example[&#39;Total system GHGs (kgCO2eq)&#39;]+optimisation_example[&#39;Kerosene GHGs (kgCO2eq)&#39;],
        facecolor=&#39;w&#39;,edgecolor=&#39;k&#39;,linestyle = &#39;:&#39;,label=&#39;Mitigated kerosene&#39;)
plt.legend(bbox_to_anchor=(1.0, 0.75))
plt.xticks(range(5),optimisation_example[&#39;Parameter value&#39;])
plt.xlabel(&#39;Blackout threshold value&#39;)
plt.yticks(range(0,600001,100000),range(0,601,100))
plt.ylabel(&#39;Lifetime GHG emissions (tCO2eq)&#39;)
plt.show()
</pre></div>
</div>
<img alt="_images/output_27_0_opt.png" src="_images/output_27_0_opt.png" />
<p>The GHGs associated with the system increase as reliability increases,
which as discussed earlier is inherent in larger systems with greater
equipment requirements. In this case, however, the impact of kerosene
usage has a significant effect: kerosene for lighting when electricity
is unavailable is very common in our case study location of Bahraich,
and by achieving higher levels of reliability our systems can offset
larger amounts of kerosene usage in the evenings. Less reliable systems,
however, provide less availability in the evening periods and so
kerosene usage remains relatively prevalent; this is also captured in
the <code class="docutils literal notranslate"><span class="pre">Kerosene</span> <span class="pre">displacement</span></code> variable.</p>
<p>Here we can see that systems with increasing reliability lower total GHG
emissions over their lifetimes, but this diminishes between the systems
with <code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.1</span></code> and <code class="docutils literal notranslate"><span class="pre">0.05</span></code>. Given the budgetary
constraints discussed in  the section on incorporating further constraints,
let’s assume that the system with <code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.1</span></code> fits our
environmental needs by significantly reducing GHGs from existing
kerosene use whilst also staying within an appropriate budget for the
project and therefore select this system for deployment.</p>
</section>
<section id="returning-to-system-performance">
<h3>Returning to system performance<a class="headerlink" href="#returning-to-system-performance" title="Permalink to this headline"></a></h3>
<p>Now that we’ve selected the system with <code class="docutils literal notranslate"><span class="pre">Parameter</span> <span class="pre">value</span> <span class="pre">=</span> <span class="pre">0.1</span></code> as the
one to be installed we should investigate its technical performance to
make sure that it will meet the needs of the community. Whilst this has
already been assessed during the optimisation process, this will allow
us to dive deeper into its operation to identify any potentially
unexpected results.</p>
<p>To do this we first use a function we mentioned earlier to open the
performance of the system from its CSV file:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>chosen_system = Optimisation().open_optimisation(filename = &#39;/Changing parameter example/Threshold value = 0.10&#39;)
</pre></div>
</div>
<p>Note that here we must also specify the folder the file is stored in
(<code class="docutils literal notranslate"><span class="pre">Changing</span> <span class="pre">parameter</span> <span class="pre">optimisation</span></code>) as the function looks in the
<code class="docutils literal notranslate"><span class="pre">Saved</span> <span class="pre">optimisations</span></code> folder by default. Next we can use a function in
the <code class="docutils literal notranslate"><span class="pre">Energy_System</span></code> module to run a simulation for this chosen system,
automatically accounting for the equipment upgrades:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>sys.path.insert(0, &#39;/Users/prs09/Documents/CLOVER/Scripts/Simulation scripts/&#39;)
from Energy_System import Energy_System
chosen_system_simulation = Energy_System().lifetime_simulation(chosen_system)
chosen_system_simulation.head(24).round(3)
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Time</span> <span class="n">taken</span> <span class="k">for</span> <span class="n">simulation</span><span class="p">:</span> <span class="mf">0.23</span> <span class="n">seconds</span> <span class="n">per</span> <span class="n">year</span>

<span class="n">Time</span> <span class="n">taken</span> <span class="k">for</span> <span class="n">simulation</span><span class="p">:</span> <span class="mf">0.12</span> <span class="n">seconds</span> <span class="n">per</span> <span class="n">year</span>

<span class="n">Time</span> <span class="n">taken</span> <span class="k">for</span> <span class="n">simulation</span><span class="p">:</span> <span class="mf">0.06</span> <span class="n">seconds</span> <span class="n">per</span> <span class="n">year</span>
</pre></div>
</div>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Load energy (kWh)</th>
      <th>Total energy used (kWh)</th>
      <th>Unmet energy (kWh)</th>
      <th>Blackouts</th>
      <th>Renewables energy used (kWh)</th>
      <th>Storage energy supplied (kWh)</th>
      <th>Grid energy (kWh)</th>
      <th>Diesel energy (kWh)</th>
      <th>Diesel times</th>
      <th>Diesel fuel usage (l)</th>
      <th>Storage profile (kWh)</th>
      <th>Renewables energy supplied (kWh)</th>
      <th>Hourly storage (kWh)</th>
      <th>Dumped energy (kWh)</th>
      <th>Battery health</th>
      <th>Households</th>
      <th>Kerosene lamps</th>
      <th>Kerosene mitigation</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1.166</td>
      <td>1.166</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>1.166</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1.166</td>
      <td>0.000</td>
      <td>30.334</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>75.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>0.938</td>
      <td>0.938</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.938</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>30.212</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>103.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0.920</td>
      <td>0.968</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.968</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.920</td>
      <td>0.000</td>
      <td>29.123</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>81.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0.377</td>
      <td>0.377</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.377</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>29.007</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>91.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0.402</td>
      <td>0.423</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.423</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.402</td>
      <td>0.000</td>
      <td>28.467</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>74.0</td>
    </tr>
    <tr>
      <th>5</th>
      <td>0.412</td>
      <td>0.412</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.412</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>28.353</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>73.0</td>
    </tr>
    <tr>
      <th>6</th>
      <td>0.446</td>
      <td>0.470</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.470</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-0.446</td>
      <td>0.000</td>
      <td>27.770</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>70.0</td>
    </tr>
    <tr>
      <th>7</th>
      <td>1.258</td>
      <td>1.320</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.081</td>
      <td>1.239</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1.177</td>
      <td>0.081</td>
      <td>26.421</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>8</th>
      <td>1.479</td>
      <td>1.479</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.479</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.182</td>
      <td>1.661</td>
      <td>26.487</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1.300</td>
      <td>1.300</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.300</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2.481</td>
      <td>3.781</td>
      <td>28.739</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>10</th>
      <td>0.726</td>
      <td>0.726</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.726</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.607</td>
      <td>5.334</td>
      <td>31.499</td>
      <td>1.502</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1.668</td>
      <td>1.668</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.668</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>4.532</td>
      <td>6.200</td>
      <td>31.499</td>
      <td>4.179</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>12</th>
      <td>1.105</td>
      <td>1.105</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.105</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.510</td>
      <td>6.615</td>
      <td>31.499</td>
      <td>5.108</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>13</th>
      <td>1.100</td>
      <td>1.100</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.100</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>5.190</td>
      <td>6.290</td>
      <td>31.499</td>
      <td>4.805</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>14</th>
      <td>1.947</td>
      <td>1.947</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.947</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>3.413</td>
      <td>5.361</td>
      <td>31.499</td>
      <td>3.117</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>15</th>
      <td>2.226</td>
      <td>2.226</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>2.226</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.537</td>
      <td>3.763</td>
      <td>31.499</td>
      <td>1.334</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>16</th>
      <td>1.479</td>
      <td>1.479</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.479</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.254</td>
      <td>1.733</td>
      <td>31.499</td>
      <td>0.115</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>17</th>
      <td>3.626</td>
      <td>3.626</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.153</td>
      <td>0.000</td>
      <td>3.473</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.153</td>
      <td>31.373</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>122.0</td>
    </tr>
    <tr>
      <th>18</th>
      <td>2.001</td>
      <td>2.106</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>2.106</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-2.001</td>
      <td>0.000</td>
      <td>29.141</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>333.0</td>
    </tr>
    <tr>
      <th>19</th>
      <td>4.447</td>
      <td>4.681</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>4.681</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-4.447</td>
      <td>0.000</td>
      <td>24.343</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>338.0</td>
    </tr>
    <tr>
      <th>20</th>
      <td>1.961</td>
      <td>2.064</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>2.064</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-1.961</td>
      <td>0.000</td>
      <td>22.181</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>336.0</td>
    </tr>
    <tr>
      <th>21</th>
      <td>1.576</td>
      <td>1.576</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>1.576</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>0.000</td>
      <td>22.093</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>277.0</td>
    </tr>
    <tr>
      <th>22</th>
      <td>2.226</td>
      <td>2.343</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>2.343</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-2.226</td>
      <td>0.000</td>
      <td>19.661</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>132.0</td>
    </tr>
    <tr>
      <th>23</th>
      <td>2.038</td>
      <td>2.145</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.000</td>
      <td>2.145</td>
      <td>0.000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>-2.038</td>
      <td>0.000</td>
      <td>17.437</td>
      <td>0.000</td>
      <td>1.0</td>
      <td>100</td>
      <td>0.0</td>
      <td>108.0</td>
    </tr>
  </tbody>
</table>
</div><div class="line-block">
<div class="line"><br /></div>
</div>
<p>Here we have once again displayed the first day of data from this
simulation output, similarly to  the section on simulation outputs
and notice
that the output of <code class="docutils literal notranslate"><span class="pre">Energy_System().lifetime_simulation(...)</span></code> gives a
single output of the system performance, rather than the additional
second output describing the makeup of that system (as we already know
it from the input we used).</p>
<p>As an aside, it is also possible to perform the reverse process that we
have just used: we can generate the technical, financial and
environmental outputs of a given simulation using the function
<code class="docutils literal notranslate"><span class="pre">Optimisation().system_appraisal(chosen_system_simulation)</span></code>. This
function takes the (two-component) variable <code class="docutils literal notranslate"><span class="pre">chosen_system_simulation</span></code>
as an input, and returns the same format of appraisal results as is
generated by the standard optimisation processes. This could be useful,
for example, when assessing the performance of a specific case study
system which was not generated through the optimisation process.</p>
<p>Let’s look at the energy use on an average day for each of the three
iteration periods, plotted at the same scale:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>fig,([ax1,ax2,ax3]) = plt.subplots(1,3,sharex=True, sharey=True,figsize=(12,4))

#Iteration period 1
iteration_length = 365 * 4
start_hour = 0 * (iteration_length * 24)
end_hour = 1 * (iteration_length * 24) - 1
iteration_performance = chosen_system_simulation.loc[start_hour:end_hour]
total_used = np.mean(np.reshape(iteration_performance[&#39;Total energy used (kWh)&#39;].values,(iteration_length,24)),axis=0)
renewable_energy = np.mean(np.reshape(iteration_performance[&#39;Renewables energy used (kWh)&#39;].values,(iteration_length,24)),axis=0)
storage_energy = np.mean(np.reshape(iteration_performance[&#39;Storage energy supplied (kWh)&#39;].values,(iteration_length,24)),axis=0)
grid_energy = np.mean(np.reshape(iteration_performance[&#39;Grid energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
diesel_energy = np.mean(np.reshape(iteration_performance[&#39;Diesel energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
unmet_energy = np.mean(np.reshape(iteration_performance[&#39;Unmet energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
renewables_supplied = np.mean(np.reshape(iteration_performance[&#39;Renewables energy supplied (kWh)&#39;].values,(iteration_length,24)),axis=0)

ax1.plot(total_used, label = &#39;Total used&#39;)
ax1.plot(renewable_energy, label = &#39;Solar used directly&#39;)
ax1.plot(storage_energy, label = &#39;Storage&#39;)
ax1.plot(grid_energy, label = &#39;Grid&#39;)
ax1.plot(diesel_energy, label = &#39;Diesel&#39;)
ax1.plot(unmet_energy, label = &#39;Unmet&#39;)
ax1.plot(renewables_supplied, label = &#39;Solar generated&#39;)
ax1.set(xticks = range(0,24,6),
        xlim=(0,23),
        xlabel = &#39;Hour of day&#39;,
        ylabel = &#39;Average energy (kWh per hour)&#39;,
        title = &#39;Years 1-4&#39;)
ax1.legend()

#Iteration period 2
iteration_length = 365 * 4
start_hour = 1 * (iteration_length * 24)
end_hour = 2 * (iteration_length * 24) - 1
iteration_performance = chosen_system_simulation.loc[start_hour:end_hour]
total_used = np.mean(np.reshape(iteration_performance[&#39;Total energy used (kWh)&#39;].values,(iteration_length,24)),axis=0)
renewable_energy = np.mean(np.reshape(iteration_performance[&#39;Renewables energy used (kWh)&#39;].values,(iteration_length,24)),axis=0)
storage_energy = np.mean(np.reshape(iteration_performance[&#39;Storage energy supplied (kWh)&#39;].values,(iteration_length,24)),axis=0)
grid_energy = np.mean(np.reshape(iteration_performance[&#39;Grid energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
diesel_energy = np.mean(np.reshape(iteration_performance[&#39;Diesel energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
unmet_energy = np.mean(np.reshape(iteration_performance[&#39;Unmet energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
renewables_supplied = np.mean(np.reshape(iteration_performance[&#39;Renewables energy supplied (kWh)&#39;].values,(iteration_length,24)),axis=0)

ax2.plot(total_used, label = &#39;Total used&#39;)
ax2.plot(renewable_energy, label = &#39;Solar used directly&#39;)
ax2.plot(storage_energy, label = &#39;Storage&#39;)
ax2.plot(grid_energy, label = &#39;Grid&#39;)
ax2.plot(diesel_energy, label = &#39;Diesel&#39;)
ax2.plot(unmet_energy, label = &#39;Unmet&#39;)
ax2.plot(renewables_supplied, label = &#39;Solar generated&#39;)
ax2.set(xticks = range(0,24,6),
        xlim=(0,23),
        xlabel = &#39;Hour of day&#39;,
        title = &#39;Years 5-8&#39;)

#Iteration period 3
iteration_length = 365 * 4
start_hour = 2 * (iteration_length * 24)
end_hour = 3 * (iteration_length * 24) - 1
iteration_performance = chosen_system_simulation.loc[start_hour:end_hour]
total_used = np.mean(np.reshape(iteration_performance[&#39;Total energy used (kWh)&#39;].values,(iteration_length,24)),axis=0)
renewable_energy = np.mean(np.reshape(iteration_performance[&#39;Renewables energy used (kWh)&#39;].values,(iteration_length,24)),axis=0)
storage_energy = np.mean(np.reshape(iteration_performance[&#39;Storage energy supplied (kWh)&#39;].values,(iteration_length,24)),axis=0)
grid_energy = np.mean(np.reshape(iteration_performance[&#39;Grid energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
diesel_energy = np.mean(np.reshape(iteration_performance[&#39;Diesel energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
unmet_energy = np.mean(np.reshape(iteration_performance[&#39;Unmet energy (kWh)&#39;].values,(iteration_length,24)),axis=0)
renewables_supplied = np.mean(np.reshape(iteration_performance[&#39;Renewables energy supplied (kWh)&#39;].values,(iteration_length,24)),axis=0)

ax3.plot(total_used, label = &#39;Total used&#39;)
ax3.plot(renewable_energy, label = &#39;Solar used directly&#39;)
ax3.plot(storage_energy, label = &#39;Storage&#39;)
ax3.plot(grid_energy, label = &#39;Grid&#39;)
ax3.plot(diesel_energy, label = &#39;Diesel&#39;)
ax3.plot(unmet_energy, label = &#39;Unmet&#39;)
ax3.plot(renewables_supplied, label = &#39;Solar generated&#39;)
ax3.set(xticks = range(0,24,6),
        xlim=(0,23),
        xlabel = &#39;Hour of day&#39;,
        title = &#39;Years 9-12&#39;)

plt.show()
</pre></div>
</div>
<img alt="_images/output_33_0_opt.png" src="_images/output_33_0_opt.png" />
<p>We can observe here the growing energy generation and usage across the
three iteration periods and some minor variations in the relative usage
of each source of power at different points during the day, but in
general the performance seems quite similar across the three iteration
periods over the lifetime of the system. If we had further issues to
consider, for example if the load profile changed in shape over time as
well as increasing, we might need to investigate the different iteration
periods in more detail.</p>
<p>Now let’s look at the availability of energy, in terms of the average
proportion of blackouts per day, over the lifetime of the system:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>blackouts = pd.DataFrame(chosen_system_simulation[&#39;Blackouts&#39;])
daily_blackout_mean = np.mean(np.reshape(np.mean(blackouts[0:365*24*12],axis=1).values,(365*12,24)),axis=1)
lifetime_mean = np.mean(daily_blackout_mean)
plt.figsize=(12,4)

plt.plot(range(365*12),pd.DataFrame(daily_blackout_mean).rolling(30).mean(), label = &#39;30-day rolling average&#39;)
plt.plot([0,len(daily_blackout_mean)],[0.1,0.1],
         color = &#39;g&#39;, linestyle = &#39;--&#39;, label = &#39;Target threshold&#39;)

plt.plot([0,len(daily_blackout_mean)],[lifetime_mean,lifetime_mean],
         color = &#39;k&#39;, linestyle = &#39;:&#39;, label = &#39;Lifetime average&#39;)

plt.ylim(0,0.3)
plt.xlim(0,365*12)
plt.xticks(range(0,len(daily_blackout_mean)+1,365),range(13))
plt.legend()
plt.xlabel(&#39;Year of lifetime&#39;)
plt.ylabel(&#39;Proportion of day with blackouts&#39;)
plt.show()
</pre></div>
</div>
<img alt="_images/output_35_0_opt.png" src="_images/output_35_0_opt.png" />
<p>To remove some of the inherent variability between days we present the
data in terms of a 30-day rolling average. As we can see, the
availability of power varies quite significantly over the lifetime and
each iteration period: as the load grows, the ability of the system to
maintain the desired threshold decreases and so blackouts increase
around halfway through each iteration period. There is also a seasonal
effect, where blackouts occur more frequently in the winter months.
Let’s look at the average blackouts for each year of the lifetime:</p>
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span>blackouts = pd.DataFrame(chosen_system_simulation[&#39;Blackouts&#39;])
print(&#39;Year | Mean | Standard deviation&#39;)
for year in range(12):
    start_hour = year * 365 * 24
    end_hour = (year+1) * 365 * 24 - 1
    yearly_blackouts = blackouts.loc[start_hour:end_hour]
    print(&#39;Year &#39;+str(year+1)+&#39;: &#39;+str(np.mean(yearly_blackouts)[&#39;Blackouts&#39;].round(2))
          +str(&#39; +/- &#39;)+str(np.std(yearly_blackouts)[&#39;Blackouts&#39;].round(2)))
print(&#39;Lifetime average: &#39;+str(np.mean(blackouts)[&#39;Blackouts&#39;].round(2))
      +str(&#39; +/- &#39;)+str(np.std(blackouts)[&#39;Blackouts&#39;].round(2)))
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Year</span> <span class="o">|</span> <span class="n">Mean</span> <span class="o">|</span> <span class="n">Standard</span> <span class="n">deviation</span>
<span class="n">Year</span> <span class="mi">1</span><span class="p">:</span> <span class="mf">0.01</span> <span class="o">+/-</span> <span class="mf">0.11</span>
<span class="n">Year</span> <span class="mi">2</span><span class="p">:</span> <span class="mf">0.04</span> <span class="o">+/-</span> <span class="mf">0.19</span>
<span class="n">Year</span> <span class="mi">3</span><span class="p">:</span> <span class="mf">0.07</span> <span class="o">+/-</span> <span class="mf">0.26</span>
<span class="n">Year</span> <span class="mi">4</span><span class="p">:</span> <span class="mf">0.14</span> <span class="o">+/-</span> <span class="mf">0.35</span>
<span class="n">Year</span> <span class="mi">5</span><span class="p">:</span> <span class="mf">0.01</span> <span class="o">+/-</span> <span class="mf">0.12</span>
<span class="n">Year</span> <span class="mi">6</span><span class="p">:</span> <span class="mf">0.06</span> <span class="o">+/-</span> <span class="mf">0.24</span>
<span class="n">Year</span> <span class="mi">7</span><span class="p">:</span> <span class="mf">0.11</span> <span class="o">+/-</span> <span class="mf">0.32</span>
<span class="n">Year</span> <span class="mi">8</span><span class="p">:</span> <span class="mf">0.17</span> <span class="o">+/-</span> <span class="mf">0.37</span>
<span class="n">Year</span> <span class="mi">9</span><span class="p">:</span> <span class="mf">0.05</span> <span class="o">+/-</span> <span class="mf">0.21</span>
<span class="n">Year</span> <span class="mi">10</span><span class="p">:</span> <span class="mf">0.07</span> <span class="o">+/-</span> <span class="mf">0.26</span>
<span class="n">Year</span> <span class="mi">11</span><span class="p">:</span> <span class="mf">0.12</span> <span class="o">+/-</span> <span class="mf">0.32</span>
<span class="n">Year</span> <span class="mi">12</span><span class="p">:</span> <span class="mf">0.17</span> <span class="o">+/-</span> <span class="mf">0.37</span>
<span class="n">Lifetime</span> <span class="n">average</span><span class="p">:</span> <span class="mf">0.08</span> <span class="o">+/-</span> <span class="mf">0.28</span>
</pre></div>
</div>
<p>The first two years in each iteration period (1-2, 5-6, 9-10) perform
better than expected, but the final years (4, 8, 12) all have far more
blackouts than our threshold value (<code class="docutils literal notranslate"><span class="pre">0.10</span></code>) or the lifetime average.
These later years also have larger standard deviations, which means that
some days have more variable performances, also visible in the figure
above.</p>
<p>This could pose a problem for system operators: although customers will
receive an adequate service on average, during the winter months or the
later years they might not pay their monthly bills (for example) if
their service has not met the levels promised to them. This will affect
the financial returns of the project, as well as potentially influence
community perception of the system.</p>
<p>If these periods of reduced availability will be an issue we have a few
options to improve the system design. The first would be to re-optimise
the system using a more restrictive threshold criterion: this will
likely lower both the mean for each iteration period and the lifetime
average, but the same changing profile will probably still be present
(albeit exceeding the initial threshold of <code class="docutils literal notranslate"><span class="pre">Blackouts</span> <span class="pre">=</span> <span class="pre">0.10</span></code> less
frequently). Another option would be to shorten the lifetime period,
allowing the system to be resized more frequently to better account for
the growing load profile and have a more consistent incidence of
blackouts. Finally in practice it may be pragmatic to install the system
as designed here but monitor its performance: if the load profile grows
over time as expected the system could be revisited earlier than
expected to maintain the desired performance, or if not then new
equipment could be installed later.</p>
</section>
<section id="practical-considerations">
<h3>Practical considerations<a class="headerlink" href="#practical-considerations" title="Permalink to this headline"></a></h3>
<p>CLOVER is designed for users to model community electricity systems,
simulate their performance, and identify optimum configurations based on
the inputs they choose. The simulation and optimisation functions, and
CLOVER in general, will provide results which can inform system design
for practical deployment but should always be treated with appropriate
caution. The confidence you have in your input data, for example, can be
used as a good judge of the confidence you have in the results of using
CLOVER.</p>
<p>This is not to say that all of the modelling is purely theoretical:
CLOVER should be used as a tool to help inform research or practical
system deployment in the context of many other activities such as
community engagement, political priorities, business model development
and technical equipment specifications. These practical considerations
are sometimes impossible to quantify and so should be dealt with
separately to ensure they are properly accounted for as part of a
project, and should inform (and be informed by) modelling in CLOVER
wherever possible.</p>
<p>The greatest value that CLOVER can bring to a project is its ability to
(relatively) quickly and easily explore many different scenarios and
provide results on the design and performance of systems that can be
explored in detail. Questions around providing different levels of
service to a community, using different types of energy technologies,
and under different load growth scenarios and grid availabilities can
all be answered using CLOVER, with the results considering more than
just the cost of electricity but many other performance, financial and
environmental metrics to best understand the implications of a given
system.</p>
<p>Once CLOVER has been used to identify a system which would be a good
candidate for deployment then the considerations around the equipment to
be installed, the topography of the distribution network, the customers
to be connected, the payment structures, the overall business model and
many other practical points can be brought in to interrogate the
appropriateness of the proposed system. These are beyond the scope and
capabilities of CLOVER and will rely on the expertise of the user or
their team to best identify how to implement a system which can provide
reliable, affordable and sustainable electricity to the communities they
aim to serve.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="energy_system_simulation.html" class="btn btn-neutral float-left" title="Electricity system simulation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="get_involved.html" class="btn btn-neutral float-right" title="CLOVER development" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Philip Sandwell.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>